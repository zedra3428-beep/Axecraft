{"ast":null,"code":"import React,{useState,useEffect}from'react';import{motion}from'framer-motion';import{Star,Quote,ChevronLeft,ChevronRight}from'lucide-react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API=\"\".concat(process.env.REACT_APP_BACKEND_URL,\"/api\");const StarRating=_ref=>{let{rating}=_ref;return/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-1\",children:[1,2,3,4,5].map(star=>/*#__PURE__*/_jsx(Star,{className:\"w-5 h-5 \".concat(star<=rating?'star-filled fill-current':'text-white/20')},star))});};const ReviewCard=_ref2=>{let{review,index}=_ref2;return/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:0.5,delay:index*0.1},viewport:{once:true},className:\"glass rounded-3xl p-6 relative group hover:border-white/20 transition-all duration-300\",children:[/*#__PURE__*/_jsx(Quote,{className:\"absolute top-4 right-4 w-8 h-8 text-cyan-500/20\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 mb-4\",children:[/*#__PURE__*/_jsx(\"img\",{src:review.avatar_url,alt:review.username,className:\"w-12 h-12 rounded-full border-2 border-cyan-500/30\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-unbounded font-bold text-white\",children:review.username}),/*#__PURE__*/_jsx(\"p\",{className:\"text-white/50 text-sm\",children:review.date})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(StarRating,{rating:review.rating})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-white/80 leading-relaxed\",children:review.comment})]});};const ReviewsSection=()=>{const[reviews,setReviews]=useState([]);const[currentPage,setCurrentPage]=useState(0);const reviewsPerPage=4;useEffect(()=>{const fetchReviews=async()=>{try{const response=await axios.get(\"\".concat(API,\"/reviews\"));setReviews(response.data);}catch(error){console.error('Error fetching reviews:',error);}};fetchReviews();},[]);const totalPages=Math.ceil(reviews.length/reviewsPerPage);const currentReviews=reviews.slice(currentPage*reviewsPerPage,(currentPage+1)*reviewsPerPage);const averageRating=reviews.length>0?(reviews.reduce((acc,r)=>acc+r.rating,0)/reviews.length).toFixed(1):0;return/*#__PURE__*/_jsx(\"section\",{\"data-testid\":\"reviews-section\",className:\"relative z-20 py-20 px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-6xl mx-auto\",children:[/*#__PURE__*/_jsxs(motion.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:0.5},viewport:{once:true},className:\"text-center mb-12\",children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"font-unbounded text-3xl md:text-4xl font-bold text-white mb-4\",children:[\"Avis des \",/*#__PURE__*/_jsx(\"span\",{className:\"text-pink-400\",children:\"Joueurs\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-4 mt-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-baseline gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"font-unbounded text-5xl font-bold text-white\",children:averageRating}),/*#__PURE__*/_jsx(\"span\",{className:\"text-white/50\",children:\"/5\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-start\",children:[/*#__PURE__*/_jsx(StarRating,{rating:Math.round(averageRating)}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-white/50 text-sm mt-1\",children:[reviews.length,\" avis\"]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8\",children:currentReviews.map((review,index)=>/*#__PURE__*/_jsx(ReviewCard,{review:review,index:index},review.id))}),totalPages>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage(p=>Math.max(0,p-1)),disabled:currentPage===0,className:\"p-2 rounded-full glass hover:bg-white/10 disabled:opacity-30 transition-all\",\"data-testid\":\"reviews-prev\",children:/*#__PURE__*/_jsx(ChevronLeft,{className:\"w-5 h-5 text-white\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-2\",children:Array.from({length:totalPages}).map((_,i)=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage(i),className:\"w-2 h-2 rounded-full transition-all \".concat(i===currentPage?'bg-cyan-400 w-6':'bg-white/30 hover:bg-white/50')},i))}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentPage(p=>Math.min(totalPages-1,p+1)),disabled:currentPage===totalPages-1,className:\"p-2 rounded-full glass hover:bg-white/10 disabled:opacity-30 transition-all\",\"data-testid\":\"reviews-next\",children:/*#__PURE__*/_jsx(ChevronRight,{className:\"w-5 h-5 text-white\"})})]})]})});};export default ReviewsSection;","map":{"version":3,"names":["React","useState","useEffect","motion","Star","Quote","ChevronLeft","ChevronRight","axios","jsx","_jsx","jsxs","_jsxs","API","concat","process","env","REACT_APP_BACKEND_URL","StarRating","_ref","rating","className","children","map","star","ReviewCard","_ref2","review","index","div","initial","opacity","y","whileInView","transition","duration","delay","viewport","once","src","avatar_url","alt","username","date","comment","ReviewsSection","reviews","setReviews","currentPage","setCurrentPage","reviewsPerPage","fetchReviews","response","get","data","error","console","totalPages","Math","ceil","length","currentReviews","slice","averageRating","reduce","acc","r","toFixed","round","id","onClick","p","max","disabled","Array","from","_","i","min"],"sources":["/app/frontend/src/components/ReviewsSection.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { motion } from 'framer-motion';\nimport { Star, Quote, ChevronLeft, ChevronRight } from 'lucide-react';\nimport axios from 'axios';\n\nconst API = `${process.env.REACT_APP_BACKEND_URL}/api`;\n\nconst StarRating = ({ rating }) => (\n  <div className=\"flex gap-1\">\n    {[1, 2, 3, 4, 5].map((star) => (\n      <Star\n        key={star}\n        className={`w-5 h-5 ${star <= rating ? 'star-filled fill-current' : 'text-white/20'}`}\n      />\n    ))}\n  </div>\n);\n\nconst ReviewCard = ({ review, index }) => (\n  <motion.div\n    initial={{ opacity: 0, y: 30 }}\n    whileInView={{ opacity: 1, y: 0 }}\n    transition={{ duration: 0.5, delay: index * 0.1 }}\n    viewport={{ once: true }}\n    className=\"glass rounded-3xl p-6 relative group hover:border-white/20 transition-all duration-300\"\n  >\n    {/* Quote Icon */}\n    <Quote className=\"absolute top-4 right-4 w-8 h-8 text-cyan-500/20\" />\n\n    {/* Header */}\n    <div className=\"flex items-center gap-4 mb-4\">\n      <img\n        src={review.avatar_url}\n        alt={review.username}\n        className=\"w-12 h-12 rounded-full border-2 border-cyan-500/30\"\n      />\n      <div>\n        <h4 className=\"font-unbounded font-bold text-white\">{review.username}</h4>\n        <p className=\"text-white/50 text-sm\">{review.date}</p>\n      </div>\n    </div>\n\n    {/* Rating */}\n    <div className=\"mb-4\">\n      <StarRating rating={review.rating} />\n    </div>\n\n    {/* Comment */}\n    <p className=\"text-white/80 leading-relaxed\">{review.comment}</p>\n  </motion.div>\n);\n\nconst ReviewsSection = () => {\n  const [reviews, setReviews] = useState([]);\n  const [currentPage, setCurrentPage] = useState(0);\n  const reviewsPerPage = 4;\n\n  useEffect(() => {\n    const fetchReviews = async () => {\n      try {\n        const response = await axios.get(`${API}/reviews`);\n        setReviews(response.data);\n      } catch (error) {\n        console.error('Error fetching reviews:', error);\n      }\n    };\n    fetchReviews();\n  }, []);\n\n  const totalPages = Math.ceil(reviews.length / reviewsPerPage);\n  const currentReviews = reviews.slice(\n    currentPage * reviewsPerPage,\n    (currentPage + 1) * reviewsPerPage\n  );\n\n  const averageRating = reviews.length > 0\n    ? (reviews.reduce((acc, r) => acc + r.rating, 0) / reviews.length).toFixed(1)\n    : 0;\n\n  return (\n    <section data-testid=\"reviews-section\" className=\"relative z-20 py-20 px-4\">\n      <div className=\"max-w-6xl mx-auto\">\n        {/* Section Header */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          whileInView={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.5 }}\n          viewport={{ once: true }}\n          className=\"text-center mb-12\"\n        >\n          <h2 className=\"font-unbounded text-3xl md:text-4xl font-bold text-white mb-4\">\n            Avis des <span className=\"text-pink-400\">Joueurs</span>\n          </h2>\n          \n          {/* Average Rating */}\n          <div className=\"flex items-center justify-center gap-4 mt-6\">\n            <div className=\"flex items-baseline gap-2\">\n              <span className=\"font-unbounded text-5xl font-bold text-white\">{averageRating}</span>\n              <span className=\"text-white/50\">/5</span>\n            </div>\n            <div className=\"flex flex-col items-start\">\n              <StarRating rating={Math.round(averageRating)} />\n              <span className=\"text-white/50 text-sm mt-1\">{reviews.length} avis</span>\n            </div>\n          </div>\n        </motion.div>\n\n        {/* Reviews Grid */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8\">\n          {currentReviews.map((review, index) => (\n            <ReviewCard key={review.id} review={review} index={index} />\n          ))}\n        </div>\n\n        {/* Pagination */}\n        {totalPages > 1 && (\n          <div className=\"flex items-center justify-center gap-4\">\n            <button\n              onClick={() => setCurrentPage(p => Math.max(0, p - 1))}\n              disabled={currentPage === 0}\n              className=\"p-2 rounded-full glass hover:bg-white/10 disabled:opacity-30 transition-all\"\n              data-testid=\"reviews-prev\"\n            >\n              <ChevronLeft className=\"w-5 h-5 text-white\" />\n            </button>\n            <div className=\"flex gap-2\">\n              {Array.from({ length: totalPages }).map((_, i) => (\n                <button\n                  key={i}\n                  onClick={() => setCurrentPage(i)}\n                  className={`w-2 h-2 rounded-full transition-all ${\n                    i === currentPage ? 'bg-cyan-400 w-6' : 'bg-white/30 hover:bg-white/50'\n                  }`}\n                />\n              ))}\n            </div>\n            <button\n              onClick={() => setCurrentPage(p => Math.min(totalPages - 1, p + 1))}\n              disabled={currentPage === totalPages - 1}\n              className=\"p-2 rounded-full glass hover:bg-white/10 disabled:opacity-30 transition-all\"\n              data-testid=\"reviews-next\"\n            >\n              <ChevronRight className=\"w-5 h-5 text-white\" />\n            </button>\n          </div>\n        )}\n      </div>\n    </section>\n  );\n};\n\nexport default ReviewsSection;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}