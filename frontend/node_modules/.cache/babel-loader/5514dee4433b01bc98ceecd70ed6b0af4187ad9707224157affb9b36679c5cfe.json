{"ast":null,"code":"import { stateMediator as defaultStateMediator, prepareStateOwners } from \"./state-mediator.js\";\nimport { areValuesEq } from \"./util.js\";\nimport { requestMap as defaultRequestMap } from \"./request-map.js\";\nconst createMediaStore = ({\n  media,\n  fullscreenElement,\n  documentElement,\n  stateMediator = defaultStateMediator,\n  requestMap = defaultRequestMap,\n  options = {},\n  monitorStateOwnersOnlyWithSubscriptions = true\n}) => {\n  const callbacks = [];\n  const stateOwners = {\n    // Spreading options here since folks should not rely on holding onto references\n    // for any app-level logic wrt options.\n    options: {\n      ...options\n    }\n  };\n  let state = Object.freeze({\n    mediaPreviewTime: void 0,\n    mediaPreviewImage: void 0,\n    mediaPreviewCoords: void 0,\n    mediaPreviewChapter: void 0\n  });\n  const updateState = nextStateDelta => {\n    if (nextStateDelta == void 0) return;\n    if (areValuesEq(nextStateDelta, state)) {\n      return;\n    }\n    state = Object.freeze({\n      ...state,\n      ...nextStateDelta\n    });\n    callbacks.forEach(cb => cb(state));\n  };\n  const updateStateFromFacade = () => {\n    const nextState = Object.entries(stateMediator).reduce((nextState2, [stateName, {\n      get\n    }]) => {\n      nextState2[stateName] = get(stateOwners);\n      return nextState2;\n    }, {});\n    updateState(nextState);\n  };\n  const stateUpdateHandlers = {};\n  let nextStateOwners = void 0;\n  const updateStateOwners = async (nextStateOwnersDelta, nextSubscriberCount) => {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p;\n    const pendingUpdate = !!nextStateOwners;\n    nextStateOwners = {\n      ...stateOwners,\n      ...(nextStateOwners != null ? nextStateOwners : {}),\n      ...nextStateOwnersDelta\n    };\n    if (pendingUpdate) return;\n    await prepareStateOwners(...Object.values(nextStateOwnersDelta));\n    const shouldTeardownFromSubscriberCount = callbacks.length > 0 && nextSubscriberCount === 0 && monitorStateOwnersOnlyWithSubscriptions;\n    const mediaChanged = stateOwners.media !== nextStateOwners.media;\n    const textTracksChanged = ((_a = stateOwners.media) == null ? void 0 : _a.textTracks) !== ((_b = nextStateOwners.media) == null ? void 0 : _b.textTracks);\n    const videoRenditionsChanged = ((_c = stateOwners.media) == null ? void 0 : _c.videoRenditions) !== ((_d = nextStateOwners.media) == null ? void 0 : _d.videoRenditions);\n    const audioTracksChanged = ((_e = stateOwners.media) == null ? void 0 : _e.audioTracks) !== ((_f = nextStateOwners.media) == null ? void 0 : _f.audioTracks);\n    const remoteChanged = ((_g = stateOwners.media) == null ? void 0 : _g.remote) !== ((_h = nextStateOwners.media) == null ? void 0 : _h.remote);\n    const rootNodeChanged = stateOwners.documentElement !== nextStateOwners.documentElement;\n    const teardownMedia = !!stateOwners.media && (mediaChanged || shouldTeardownFromSubscriberCount);\n    const teardownTextTracks = !!((_i = stateOwners.media) == null ? void 0 : _i.textTracks) && (textTracksChanged || shouldTeardownFromSubscriberCount);\n    const teardownVideoRenditions = !!((_j = stateOwners.media) == null ? void 0 : _j.videoRenditions) && (videoRenditionsChanged || shouldTeardownFromSubscriberCount);\n    const teardownAudioTracks = !!((_k = stateOwners.media) == null ? void 0 : _k.audioTracks) && (audioTracksChanged || shouldTeardownFromSubscriberCount);\n    const teardownRemote = !!((_l = stateOwners.media) == null ? void 0 : _l.remote) && (remoteChanged || shouldTeardownFromSubscriberCount);\n    const teardownRootNode = !!stateOwners.documentElement && (rootNodeChanged || shouldTeardownFromSubscriberCount);\n    const teardownSomething = teardownMedia || teardownTextTracks || teardownVideoRenditions || teardownAudioTracks || teardownRemote || teardownRootNode;\n    const shouldSetupFromSubscriberCount = callbacks.length === 0 && nextSubscriberCount === 1 && monitorStateOwnersOnlyWithSubscriptions;\n    const setupMedia = !!nextStateOwners.media && (mediaChanged || shouldSetupFromSubscriberCount);\n    const setupTextTracks = !!((_m = nextStateOwners.media) == null ? void 0 : _m.textTracks) && (textTracksChanged || shouldSetupFromSubscriberCount);\n    const setupVideoRenditions = !!((_n = nextStateOwners.media) == null ? void 0 : _n.videoRenditions) && (videoRenditionsChanged || shouldSetupFromSubscriberCount);\n    const setupAudioTracks = !!((_o = nextStateOwners.media) == null ? void 0 : _o.audioTracks) && (audioTracksChanged || shouldSetupFromSubscriberCount);\n    const setupRemote = !!((_p = nextStateOwners.media) == null ? void 0 : _p.remote) && (remoteChanged || shouldSetupFromSubscriberCount);\n    const setupRootNode = !!nextStateOwners.documentElement && (rootNodeChanged || shouldSetupFromSubscriberCount);\n    const setupSomething = setupMedia || setupTextTracks || setupVideoRenditions || setupAudioTracks || setupRemote || setupRootNode;\n    const somethingToDo = teardownSomething || setupSomething;\n    if (!somethingToDo) {\n      Object.entries(nextStateOwners).forEach(([stateOwnerName, stateOwner]) => {\n        stateOwners[stateOwnerName] = stateOwner;\n      });\n      updateStateFromFacade();\n      nextStateOwners = void 0;\n      return;\n    }\n    Object.entries(stateMediator).forEach(([stateName, {\n      get,\n      mediaEvents = [],\n      textTracksEvents = [],\n      videoRenditionsEvents = [],\n      audioTracksEvents = [],\n      remoteEvents = [],\n      rootEvents = [],\n      stateOwnersUpdateHandlers = []\n    }]) => {\n      if (!stateUpdateHandlers[stateName]) {\n        stateUpdateHandlers[stateName] = {};\n      }\n      const handler = event => {\n        const nextValue = get(stateOwners, event);\n        updateState({\n          [stateName]: nextValue\n        });\n      };\n      let prevHandler;\n      prevHandler = stateUpdateHandlers[stateName].mediaEvents;\n      mediaEvents.forEach(eventType => {\n        if (prevHandler && teardownMedia) {\n          stateOwners.media.removeEventListener(eventType, prevHandler);\n          stateUpdateHandlers[stateName].mediaEvents = void 0;\n        }\n        if (setupMedia) {\n          nextStateOwners.media.addEventListener(eventType, handler);\n          stateUpdateHandlers[stateName].mediaEvents = handler;\n        }\n      });\n      prevHandler = stateUpdateHandlers[stateName].textTracksEvents;\n      textTracksEvents.forEach(eventType => {\n        var _a2, _b2;\n        if (prevHandler && teardownTextTracks) {\n          (_a2 = stateOwners.media.textTracks) == null ? void 0 : _a2.removeEventListener(eventType, prevHandler);\n          stateUpdateHandlers[stateName].textTracksEvents = void 0;\n        }\n        if (setupTextTracks) {\n          (_b2 = nextStateOwners.media.textTracks) == null ? void 0 : _b2.addEventListener(eventType, handler);\n          stateUpdateHandlers[stateName].textTracksEvents = handler;\n        }\n      });\n      prevHandler = stateUpdateHandlers[stateName].videoRenditionsEvents;\n      videoRenditionsEvents.forEach(eventType => {\n        var _a2, _b2;\n        if (prevHandler && teardownVideoRenditions) {\n          (_a2 = stateOwners.media.videoRenditions) == null ? void 0 : _a2.removeEventListener(eventType, prevHandler);\n          stateUpdateHandlers[stateName].videoRenditionsEvents = void 0;\n        }\n        if (setupVideoRenditions) {\n          (_b2 = nextStateOwners.media.videoRenditions) == null ? void 0 : _b2.addEventListener(eventType, handler);\n          stateUpdateHandlers[stateName].videoRenditionsEvents = handler;\n        }\n      });\n      prevHandler = stateUpdateHandlers[stateName].audioTracksEvents;\n      audioTracksEvents.forEach(eventType => {\n        var _a2, _b2;\n        if (prevHandler && teardownAudioTracks) {\n          (_a2 = stateOwners.media.audioTracks) == null ? void 0 : _a2.removeEventListener(eventType, prevHandler);\n          stateUpdateHandlers[stateName].audioTracksEvents = void 0;\n        }\n        if (setupAudioTracks) {\n          (_b2 = nextStateOwners.media.audioTracks) == null ? void 0 : _b2.addEventListener(eventType, handler);\n          stateUpdateHandlers[stateName].audioTracksEvents = handler;\n        }\n      });\n      prevHandler = stateUpdateHandlers[stateName].remoteEvents;\n      remoteEvents.forEach(eventType => {\n        var _a2, _b2;\n        if (prevHandler && teardownRemote) {\n          (_a2 = stateOwners.media.remote) == null ? void 0 : _a2.removeEventListener(eventType, prevHandler);\n          stateUpdateHandlers[stateName].remoteEvents = void 0;\n        }\n        if (setupRemote) {\n          (_b2 = nextStateOwners.media.remote) == null ? void 0 : _b2.addEventListener(eventType, handler);\n          stateUpdateHandlers[stateName].remoteEvents = handler;\n        }\n      });\n      prevHandler = stateUpdateHandlers[stateName].rootEvents;\n      rootEvents.forEach(eventType => {\n        if (prevHandler && teardownRootNode) {\n          stateOwners.documentElement.removeEventListener(eventType, prevHandler);\n          stateUpdateHandlers[stateName].rootEvents = void 0;\n        }\n        if (setupRootNode) {\n          nextStateOwners.documentElement.addEventListener(eventType, handler);\n          stateUpdateHandlers[stateName].rootEvents = handler;\n        }\n      });\n      const prevHandlerTeardowns = stateUpdateHandlers[stateName].stateOwnersUpdateHandlers;\n      if (prevHandlerTeardowns && teardownSomething) {\n        const teardowns = Array.isArray(prevHandlerTeardowns) ? prevHandlerTeardowns : [prevHandlerTeardowns];\n        teardowns.forEach(teardown => {\n          if (typeof teardown === \"function\") {\n            teardown();\n          }\n        });\n      }\n      if (setupSomething) {\n        const newTeardowns = stateOwnersUpdateHandlers.map(fn => fn(handler, nextStateOwners)).filter(teardown => typeof teardown === \"function\");\n        stateUpdateHandlers[stateName].stateOwnersUpdateHandlers = newTeardowns.length === 1 ? newTeardowns[0] : newTeardowns;\n      } else if (teardownSomething) {\n        stateUpdateHandlers[stateName].stateOwnersUpdateHandlers = void 0;\n      }\n    });\n    Object.entries(nextStateOwners).forEach(([stateOwnerName, stateOwner]) => {\n      stateOwners[stateOwnerName] = stateOwner;\n    });\n    updateStateFromFacade();\n    nextStateOwners = void 0;\n  };\n  updateStateOwners({\n    media,\n    fullscreenElement,\n    documentElement,\n    options\n  });\n  return {\n    // note that none of these cases directly interact with the media element, root node, full screen element, etc.\n    // note these \"actions\" could just be the events if we wanted, especially if we normalize on \"detail\" for\n    // any payload-relevant values\n    // This is roughly equivalent to our used to be in our state requests dictionary object, though much of the\n    // \"heavy lifting\" is now moved into the facade `set()`\n    dispatch(action) {\n      const {\n        type,\n        detail\n      } = action;\n      if (requestMap[type] && state.mediaErrorCode == null) {\n        updateState(requestMap[type](stateMediator, stateOwners, action));\n        return;\n      }\n      if (type === \"mediaelementchangerequest\") {\n        updateStateOwners({\n          media: detail\n        });\n      } else if (type === \"fullscreenelementchangerequest\") {\n        updateStateOwners({\n          fullscreenElement: detail\n        });\n      } else if (type === \"documentelementchangerequest\") {\n        updateStateOwners({\n          documentElement: detail\n        });\n      } else if (type === \"optionschangerequest\") {\n        Object.entries(detail != null ? detail : {}).forEach(([optionName, optionValue]) => {\n          stateOwners.options[optionName] = optionValue;\n        });\n        updateStateFromFacade();\n      }\n    },\n    getState() {\n      return state;\n    },\n    subscribe(callback) {\n      updateStateOwners({}, callbacks.length + 1);\n      callbacks.push(callback);\n      callback(state);\n      return () => {\n        const idx = callbacks.indexOf(callback);\n        if (idx >= 0) {\n          updateStateOwners({}, callbacks.length - 1);\n          callbacks.splice(idx, 1);\n        }\n      };\n    }\n  };\n};\nvar media_store_default = createMediaStore;\nexport { createMediaStore, media_store_default as default };","map":{"version":3,"names":["stateMediator","defaultStateMediator","prepareStateOwners","areValuesEq","requestMap","defaultRequestMap","createMediaStore","media","fullscreenElement","documentElement","options","monitorStateOwnersOnlyWithSubscriptions","callbacks","stateOwners","state","Object","freeze","mediaPreviewTime","mediaPreviewImage","mediaPreviewCoords","mediaPreviewChapter","updateState","nextStateDelta","forEach","cb","updateStateFromFacade","nextState","entries","reduce","nextState2","stateName","get","stateUpdateHandlers","nextStateOwners","updateStateOwners","nextStateOwnersDelta","nextSubscriberCount","_a","_b","_c","_d","_e","_f","_g","_h","_i","_j","_k","_l","_m","_n","_o","_p","pendingUpdate","values","shouldTeardownFromSubscriberCount","length","mediaChanged","textTracksChanged","textTracks","videoRenditionsChanged","videoRenditions","audioTracksChanged","audioTracks","remoteChanged","remote","rootNodeChanged","teardownMedia","teardownTextTracks","teardownVideoRenditions","teardownAudioTracks","teardownRemote","teardownRootNode","teardownSomething","shouldSetupFromSubscriberCount","setupMedia","setupTextTracks","setupVideoRenditions","setupAudioTracks","setupRemote","setupRootNode","setupSomething","somethingToDo","stateOwnerName","stateOwner","mediaEvents","textTracksEvents","videoRenditionsEvents","audioTracksEvents","remoteEvents","rootEvents","stateOwnersUpdateHandlers","handler","event","nextValue","prevHandler","eventType","removeEventListener","addEventListener","_a2","_b2","prevHandlerTeardowns","teardowns","Array","isArray","teardown","newTeardowns","map","fn","filter","dispatch","action","type","detail","mediaErrorCode","optionName","optionValue","getState","subscribe","callback","push","idx","indexOf","splice","media_store_default","default"],"sources":["/app/frontend/node_modules/media-chrome/dist/media-store/media-store.js"],"sourcesContent":["import {\n  stateMediator as defaultStateMediator,\n  prepareStateOwners\n} from \"./state-mediator.js\";\nimport { areValuesEq } from \"./util.js\";\nimport { requestMap as defaultRequestMap } from \"./request-map.js\";\nconst createMediaStore = ({\n  media,\n  fullscreenElement,\n  documentElement,\n  stateMediator = defaultStateMediator,\n  requestMap = defaultRequestMap,\n  options = {},\n  monitorStateOwnersOnlyWithSubscriptions = true\n}) => {\n  const callbacks = [];\n  const stateOwners = {\n    // Spreading options here since folks should not rely on holding onto references\n    // for any app-level logic wrt options.\n    options: { ...options }\n  };\n  let state = Object.freeze({\n    mediaPreviewTime: void 0,\n    mediaPreviewImage: void 0,\n    mediaPreviewCoords: void 0,\n    mediaPreviewChapter: void 0\n  });\n  const updateState = (nextStateDelta) => {\n    if (nextStateDelta == void 0)\n      return;\n    if (areValuesEq(nextStateDelta, state)) {\n      return;\n    }\n    state = Object.freeze({\n      ...state,\n      ...nextStateDelta\n    });\n    callbacks.forEach((cb) => cb(state));\n  };\n  const updateStateFromFacade = () => {\n    const nextState = Object.entries(stateMediator).reduce(\n      (nextState2, [stateName, { get }]) => {\n        nextState2[stateName] = get(stateOwners);\n        return nextState2;\n      },\n      {}\n    );\n    updateState(nextState);\n  };\n  const stateUpdateHandlers = {};\n  let nextStateOwners = void 0;\n  const updateStateOwners = async (nextStateOwnersDelta, nextSubscriberCount) => {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p;\n    const pendingUpdate = !!nextStateOwners;\n    nextStateOwners = {\n      ...stateOwners,\n      ...nextStateOwners != null ? nextStateOwners : {},\n      ...nextStateOwnersDelta\n    };\n    if (pendingUpdate)\n      return;\n    await prepareStateOwners(...Object.values(nextStateOwnersDelta));\n    const shouldTeardownFromSubscriberCount = callbacks.length > 0 && nextSubscriberCount === 0 && monitorStateOwnersOnlyWithSubscriptions;\n    const mediaChanged = stateOwners.media !== nextStateOwners.media;\n    const textTracksChanged = ((_a = stateOwners.media) == null ? void 0 : _a.textTracks) !== ((_b = nextStateOwners.media) == null ? void 0 : _b.textTracks);\n    const videoRenditionsChanged = ((_c = stateOwners.media) == null ? void 0 : _c.videoRenditions) !== ((_d = nextStateOwners.media) == null ? void 0 : _d.videoRenditions);\n    const audioTracksChanged = ((_e = stateOwners.media) == null ? void 0 : _e.audioTracks) !== ((_f = nextStateOwners.media) == null ? void 0 : _f.audioTracks);\n    const remoteChanged = ((_g = stateOwners.media) == null ? void 0 : _g.remote) !== ((_h = nextStateOwners.media) == null ? void 0 : _h.remote);\n    const rootNodeChanged = stateOwners.documentElement !== nextStateOwners.documentElement;\n    const teardownMedia = !!stateOwners.media && (mediaChanged || shouldTeardownFromSubscriberCount);\n    const teardownTextTracks = !!((_i = stateOwners.media) == null ? void 0 : _i.textTracks) && (textTracksChanged || shouldTeardownFromSubscriberCount);\n    const teardownVideoRenditions = !!((_j = stateOwners.media) == null ? void 0 : _j.videoRenditions) && (videoRenditionsChanged || shouldTeardownFromSubscriberCount);\n    const teardownAudioTracks = !!((_k = stateOwners.media) == null ? void 0 : _k.audioTracks) && (audioTracksChanged || shouldTeardownFromSubscriberCount);\n    const teardownRemote = !!((_l = stateOwners.media) == null ? void 0 : _l.remote) && (remoteChanged || shouldTeardownFromSubscriberCount);\n    const teardownRootNode = !!stateOwners.documentElement && (rootNodeChanged || shouldTeardownFromSubscriberCount);\n    const teardownSomething = teardownMedia || teardownTextTracks || teardownVideoRenditions || teardownAudioTracks || teardownRemote || teardownRootNode;\n    const shouldSetupFromSubscriberCount = callbacks.length === 0 && nextSubscriberCount === 1 && monitorStateOwnersOnlyWithSubscriptions;\n    const setupMedia = !!nextStateOwners.media && (mediaChanged || shouldSetupFromSubscriberCount);\n    const setupTextTracks = !!((_m = nextStateOwners.media) == null ? void 0 : _m.textTracks) && (textTracksChanged || shouldSetupFromSubscriberCount);\n    const setupVideoRenditions = !!((_n = nextStateOwners.media) == null ? void 0 : _n.videoRenditions) && (videoRenditionsChanged || shouldSetupFromSubscriberCount);\n    const setupAudioTracks = !!((_o = nextStateOwners.media) == null ? void 0 : _o.audioTracks) && (audioTracksChanged || shouldSetupFromSubscriberCount);\n    const setupRemote = !!((_p = nextStateOwners.media) == null ? void 0 : _p.remote) && (remoteChanged || shouldSetupFromSubscriberCount);\n    const setupRootNode = !!nextStateOwners.documentElement && (rootNodeChanged || shouldSetupFromSubscriberCount);\n    const setupSomething = setupMedia || setupTextTracks || setupVideoRenditions || setupAudioTracks || setupRemote || setupRootNode;\n    const somethingToDo = teardownSomething || setupSomething;\n    if (!somethingToDo) {\n      Object.entries(nextStateOwners).forEach(\n        ([stateOwnerName, stateOwner]) => {\n          stateOwners[stateOwnerName] = stateOwner;\n        }\n      );\n      updateStateFromFacade();\n      nextStateOwners = void 0;\n      return;\n    }\n    Object.entries(stateMediator).forEach(\n      ([\n        stateName,\n        {\n          get,\n          mediaEvents = [],\n          textTracksEvents = [],\n          videoRenditionsEvents = [],\n          audioTracksEvents = [],\n          remoteEvents = [],\n          rootEvents = [],\n          stateOwnersUpdateHandlers = []\n        }\n      ]) => {\n        if (!stateUpdateHandlers[stateName]) {\n          stateUpdateHandlers[stateName] = {};\n        }\n        const handler = (event) => {\n          const nextValue = get(stateOwners, event);\n          updateState({ [stateName]: nextValue });\n        };\n        let prevHandler;\n        prevHandler = stateUpdateHandlers[stateName].mediaEvents;\n        mediaEvents.forEach((eventType) => {\n          if (prevHandler && teardownMedia) {\n            stateOwners.media.removeEventListener(eventType, prevHandler);\n            stateUpdateHandlers[stateName].mediaEvents = void 0;\n          }\n          if (setupMedia) {\n            nextStateOwners.media.addEventListener(eventType, handler);\n            stateUpdateHandlers[stateName].mediaEvents = handler;\n          }\n        });\n        prevHandler = stateUpdateHandlers[stateName].textTracksEvents;\n        textTracksEvents.forEach((eventType) => {\n          var _a2, _b2;\n          if (prevHandler && teardownTextTracks) {\n            (_a2 = stateOwners.media.textTracks) == null ? void 0 : _a2.removeEventListener(\n              eventType,\n              prevHandler\n            );\n            stateUpdateHandlers[stateName].textTracksEvents = void 0;\n          }\n          if (setupTextTracks) {\n            (_b2 = nextStateOwners.media.textTracks) == null ? void 0 : _b2.addEventListener(\n              eventType,\n              handler\n            );\n            stateUpdateHandlers[stateName].textTracksEvents = handler;\n          }\n        });\n        prevHandler = stateUpdateHandlers[stateName].videoRenditionsEvents;\n        videoRenditionsEvents.forEach((eventType) => {\n          var _a2, _b2;\n          if (prevHandler && teardownVideoRenditions) {\n            (_a2 = stateOwners.media.videoRenditions) == null ? void 0 : _a2.removeEventListener(\n              eventType,\n              prevHandler\n            );\n            stateUpdateHandlers[stateName].videoRenditionsEvents = void 0;\n          }\n          if (setupVideoRenditions) {\n            (_b2 = nextStateOwners.media.videoRenditions) == null ? void 0 : _b2.addEventListener(\n              eventType,\n              handler\n            );\n            stateUpdateHandlers[stateName].videoRenditionsEvents = handler;\n          }\n        });\n        prevHandler = stateUpdateHandlers[stateName].audioTracksEvents;\n        audioTracksEvents.forEach((eventType) => {\n          var _a2, _b2;\n          if (prevHandler && teardownAudioTracks) {\n            (_a2 = stateOwners.media.audioTracks) == null ? void 0 : _a2.removeEventListener(\n              eventType,\n              prevHandler\n            );\n            stateUpdateHandlers[stateName].audioTracksEvents = void 0;\n          }\n          if (setupAudioTracks) {\n            (_b2 = nextStateOwners.media.audioTracks) == null ? void 0 : _b2.addEventListener(\n              eventType,\n              handler\n            );\n            stateUpdateHandlers[stateName].audioTracksEvents = handler;\n          }\n        });\n        prevHandler = stateUpdateHandlers[stateName].remoteEvents;\n        remoteEvents.forEach((eventType) => {\n          var _a2, _b2;\n          if (prevHandler && teardownRemote) {\n            (_a2 = stateOwners.media.remote) == null ? void 0 : _a2.removeEventListener(\n              eventType,\n              prevHandler\n            );\n            stateUpdateHandlers[stateName].remoteEvents = void 0;\n          }\n          if (setupRemote) {\n            (_b2 = nextStateOwners.media.remote) == null ? void 0 : _b2.addEventListener(eventType, handler);\n            stateUpdateHandlers[stateName].remoteEvents = handler;\n          }\n        });\n        prevHandler = stateUpdateHandlers[stateName].rootEvents;\n        rootEvents.forEach((eventType) => {\n          if (prevHandler && teardownRootNode) {\n            stateOwners.documentElement.removeEventListener(\n              eventType,\n              prevHandler\n            );\n            stateUpdateHandlers[stateName].rootEvents = void 0;\n          }\n          if (setupRootNode) {\n            nextStateOwners.documentElement.addEventListener(\n              eventType,\n              handler\n            );\n            stateUpdateHandlers[stateName].rootEvents = handler;\n          }\n        });\n        const prevHandlerTeardowns = stateUpdateHandlers[stateName].stateOwnersUpdateHandlers;\n        if (prevHandlerTeardowns && teardownSomething) {\n          const teardowns = Array.isArray(prevHandlerTeardowns) ? prevHandlerTeardowns : [prevHandlerTeardowns];\n          teardowns.forEach((teardown) => {\n            if (typeof teardown === \"function\") {\n              teardown();\n            }\n          });\n        }\n        if (setupSomething) {\n          const newTeardowns = stateOwnersUpdateHandlers.map((fn) => fn(handler, nextStateOwners)).filter((teardown) => typeof teardown === \"function\");\n          stateUpdateHandlers[stateName].stateOwnersUpdateHandlers = newTeardowns.length === 1 ? newTeardowns[0] : newTeardowns;\n        } else if (teardownSomething) {\n          stateUpdateHandlers[stateName].stateOwnersUpdateHandlers = void 0;\n        }\n      }\n    );\n    Object.entries(nextStateOwners).forEach(([stateOwnerName, stateOwner]) => {\n      stateOwners[stateOwnerName] = stateOwner;\n    });\n    updateStateFromFacade();\n    nextStateOwners = void 0;\n  };\n  updateStateOwners({ media, fullscreenElement, documentElement, options });\n  return {\n    // note that none of these cases directly interact with the media element, root node, full screen element, etc.\n    // note these \"actions\" could just be the events if we wanted, especially if we normalize on \"detail\" for\n    // any payload-relevant values\n    // This is roughly equivalent to our used to be in our state requests dictionary object, though much of the\n    // \"heavy lifting\" is now moved into the facade `set()`\n    dispatch(action) {\n      const { type, detail } = action;\n      if (requestMap[type] && state.mediaErrorCode == null) {\n        updateState(requestMap[type](stateMediator, stateOwners, action));\n        return;\n      }\n      if (type === \"mediaelementchangerequest\") {\n        updateStateOwners({ media: detail });\n      } else if (type === \"fullscreenelementchangerequest\") {\n        updateStateOwners({ fullscreenElement: detail });\n      } else if (type === \"documentelementchangerequest\") {\n        updateStateOwners({ documentElement: detail });\n      } else if (type === \"optionschangerequest\") {\n        Object.entries(detail != null ? detail : {}).forEach(([optionName, optionValue]) => {\n          stateOwners.options[optionName] = optionValue;\n        });\n        updateStateFromFacade();\n      }\n    },\n    getState() {\n      return state;\n    },\n    subscribe(callback) {\n      updateStateOwners({}, callbacks.length + 1);\n      callbacks.push(callback);\n      callback(state);\n      return () => {\n        const idx = callbacks.indexOf(callback);\n        if (idx >= 0) {\n          updateStateOwners({}, callbacks.length - 1);\n          callbacks.splice(idx, 1);\n        }\n      };\n    }\n  };\n};\nvar media_store_default = createMediaStore;\nexport {\n  createMediaStore,\n  media_store_default as default\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}