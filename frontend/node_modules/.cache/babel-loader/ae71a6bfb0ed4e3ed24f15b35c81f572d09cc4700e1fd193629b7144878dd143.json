{"ast":null,"code":"var __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj)) throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj)) throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar __privateMethod = (obj, member, method) => {\n  __accessCheck(obj, member, \"access private method\");\n  return method;\n};\nvar _rootNode, _animation, _boxes, _previewTime, _previewBox, _currentBox, _boxPaddingLeft, _boxPaddingRight, _mediaChaptersCues, _isPointerDown, _toggleRangeAnimation, toggleRangeAnimation_fn, _shouldRangeAnimate, shouldRangeAnimate_fn, _updateRange, _getElementRects, getElementRects_fn, _getBoxPosition, getBoxPosition_fn, _getBoxShiftPosition, getBoxShiftPosition_fn, _handlePointerMove, handlePointerMove_fn, _previewRequest, previewRequest_fn, _seekRequest, seekRequest_fn;\nimport { globalThis } from \"./utils/server-safe-globals.js\";\nimport { MediaChromeRange } from \"./media-chrome-range.js\";\nimport \"./media-preview-thumbnail.js\";\nimport \"./media-preview-time-display.js\";\nimport \"./media-preview-chapter-display.js\";\nimport { MediaUIEvents, MediaUIAttributes } from \"./constants.js\";\nimport { isValidNumber } from \"./utils/utils.js\";\nimport { formatAsTimePhrase } from \"./utils/time.js\";\nimport { isElementVisible } from \"./utils/element-utils.js\";\nimport { RangeAnimation } from \"./utils/range-animation.js\";\nimport { getOrInsertCSSRule, containsComposedNode, closestComposedNode, getBooleanAttr, setBooleanAttr, getNumericAttr, setNumericAttr, getStringAttr, setStringAttr } from \"./utils/element-utils.js\";\nimport { t } from \"./utils/i18n.js\";\nimport MediaPreviewThumbnail from \"./media-preview-thumbnail.js\";\nconst DEFAULT_MISSING_TIME_PHRASE = \"video not loaded, unknown time.\";\nconst updateAriaValueText = el => {\n  const range = el.range;\n  const currentTimePhrase = formatAsTimePhrase(+calcTimeFromRangeValue(el));\n  const totalTimePhrase = formatAsTimePhrase(+el.mediaSeekableEnd);\n  const fullPhrase = !(currentTimePhrase && totalTimePhrase) ? DEFAULT_MISSING_TIME_PHRASE : `${currentTimePhrase} of ${totalTimePhrase}`;\n  range.setAttribute(\"aria-valuetext\", fullPhrase);\n};\nfunction getContainerTemplateHTML(_attrs) {\n  return /*html*/`\n    <style>\n      :host {\n        --media-box-border-radius: 4px;\n        --media-box-padding-left: 10px;\n        --media-box-padding-right: 10px;\n        --media-preview-border-radius: var(--media-box-border-radius);\n        --media-box-arrow-offset: var(--media-box-border-radius);\n        --_control-background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));\n        --_preview-background: var(--media-preview-background, var(--_control-background));\n\n        ${\n  /* 1% rail width trick was off in Safari, contain: layout seems to\n  prevent the horizontal overflow as well. */\n  \"\"}\n        contain: layout;\n      }\n\n      #buffered {\n        background: var(--media-time-range-buffered-color, rgb(255 255 255 / .4));\n        position: absolute;\n        height: 100%;\n        will-change: width;\n      }\n\n      #preview-rail,\n      #current-rail {\n        width: 100%;\n        position: absolute;\n        left: 0;\n        bottom: 100%;\n        pointer-events: none;\n        will-change: transform;\n      }\n\n      [part~=\"box\"] {\n        width: min-content;\n        ${/* absolute position is needed here so the box doesn't overflow the bounds */\n  \"\"}\n        position: absolute;\n        bottom: 100%;\n        flex-direction: column;\n        align-items: center;\n        transform: translateX(-50%);\n      }\n\n      [part~=\"current-box\"] {\n        display: var(--media-current-box-display, var(--media-box-display, flex));\n        margin: var(--media-current-box-margin, var(--media-box-margin, 0 0 5px));\n        visibility: hidden;\n      }\n\n      [part~=\"preview-box\"] {\n        display: var(--media-preview-box-display, var(--media-box-display, flex));\n        margin: var(--media-preview-box-margin, var(--media-box-margin, 0 0 5px));\n        transition-property: var(--media-preview-transition-property, visibility, opacity);\n        transition-duration: var(--media-preview-transition-duration-out, .25s);\n        transition-delay: var(--media-preview-transition-delay-out, 0s);\n        visibility: hidden;\n        opacity: 0;\n      }\n\n      :host(:is([${MediaUIAttributes.MEDIA_PREVIEW_IMAGE}], [${MediaUIAttributes.MEDIA_PREVIEW_TIME}])[dragging]) [part~=\"preview-box\"] {\n        transition-duration: var(--media-preview-transition-duration-in, .5s);\n        transition-delay: var(--media-preview-transition-delay-in, .25s);\n        visibility: visible;\n        opacity: 1;\n      }\n\n      @media (hover: hover) {\n        :host(:is([${MediaUIAttributes.MEDIA_PREVIEW_IMAGE}], [${MediaUIAttributes.MEDIA_PREVIEW_TIME}]):hover) [part~=\"preview-box\"] {\n          transition-duration: var(--media-preview-transition-duration-in, .5s);\n          transition-delay: var(--media-preview-transition-delay-in, .25s);\n          visibility: visible;\n          opacity: 1;\n        }\n      }\n\n      media-preview-thumbnail,\n      ::slotted(media-preview-thumbnail) {\n        visibility: hidden;\n        ${/* delay changing these CSS props until the preview box transition is ended */\n  \"\"}\n        transition: visibility 0s .25s;\n        transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));\n        background: var(--media-preview-thumbnail-background, var(--_preview-background));\n        box-shadow: var(--media-preview-thumbnail-box-shadow, 0 0 4px rgb(0 0 0 / .2));\n        max-width: var(--media-preview-thumbnail-max-width, 180px);\n        max-height: var(--media-preview-thumbnail-max-height, 160px);\n        min-width: var(--media-preview-thumbnail-min-width, 120px);\n        min-height: var(--media-preview-thumbnail-min-height, 80px);\n        border: var(--media-preview-thumbnail-border);\n        border-radius: var(--media-preview-thumbnail-border-radius,\n          var(--media-preview-border-radius) var(--media-preview-border-radius) 0 0);\n      }\n\n      :host([${MediaUIAttributes.MEDIA_PREVIEW_IMAGE}][dragging]) media-preview-thumbnail,\n      :host([${MediaUIAttributes.MEDIA_PREVIEW_IMAGE}][dragging]) ::slotted(media-preview-thumbnail) {\n        transition-delay: var(--media-preview-transition-delay-in, .25s);\n        visibility: visible;\n      }\n\n      @media (hover: hover) {\n        :host([${MediaUIAttributes.MEDIA_PREVIEW_IMAGE}]:hover) media-preview-thumbnail,\n        :host([${MediaUIAttributes.MEDIA_PREVIEW_IMAGE}]:hover) ::slotted(media-preview-thumbnail) {\n          transition-delay: var(--media-preview-transition-delay-in, .25s);\n          visibility: visible;\n        }\n\n        :host([${MediaUIAttributes.MEDIA_PREVIEW_TIME}]:hover) {\n          --media-time-range-hover-display: block;\n        }\n      }\n\n      media-preview-chapter-display,\n      ::slotted(media-preview-chapter-display) {\n        font-size: var(--media-font-size, 13px);\n        line-height: 17px;\n        min-width: 0;\n        visibility: hidden;\n        ${/* delay changing these CSS props until the preview box transition is ended */\n  \"\"}\n        transition: min-width 0s, border-radius 0s, margin 0s, padding 0s, visibility 0s;\n        transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));\n        background: var(--media-preview-chapter-background, var(--_preview-background));\n        border-radius: var(--media-preview-chapter-border-radius,\n          var(--media-preview-border-radius) var(--media-preview-border-radius)\n          var(--media-preview-border-radius) var(--media-preview-border-radius));\n        padding: var(--media-preview-chapter-padding, 3.5px 9px);\n        margin: var(--media-preview-chapter-margin, 0 0 5px);\n        text-shadow: var(--media-preview-chapter-text-shadow, 0 0 4px rgb(0 0 0 / .75));\n      }\n\n      :host([${MediaUIAttributes.MEDIA_PREVIEW_IMAGE}]) media-preview-chapter-display,\n      :host([${MediaUIAttributes.MEDIA_PREVIEW_IMAGE}]) ::slotted(media-preview-chapter-display) {\n        transition-delay: var(--media-preview-transition-delay-in, .25s);\n        border-radius: var(--media-preview-chapter-border-radius, 0);\n        padding: var(--media-preview-chapter-padding, 3.5px 9px 0);\n        margin: var(--media-preview-chapter-margin, 0);\n        min-width: 100%;\n      }\n\n      media-preview-chapter-display[${MediaUIAttributes.MEDIA_PREVIEW_CHAPTER}],\n      ::slotted(media-preview-chapter-display[${MediaUIAttributes.MEDIA_PREVIEW_CHAPTER}]) {\n        visibility: visible;\n      }\n\n      media-preview-chapter-display:not([aria-valuetext]),\n      ::slotted(media-preview-chapter-display:not([aria-valuetext])) {\n        display: none;\n      }\n\n      media-preview-time-display,\n      ::slotted(media-preview-time-display),\n      media-time-display,\n      ::slotted(media-time-display) {\n        font-size: var(--media-font-size, 13px);\n        line-height: 17px;\n        min-width: 0;\n        ${/* delay changing these CSS props until the preview box transition is ended */\n  \"\"}\n        transition: min-width 0s, border-radius 0s;\n        transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));\n        background: var(--media-preview-time-background, var(--_preview-background));\n        border-radius: var(--media-preview-time-border-radius,\n          var(--media-preview-border-radius) var(--media-preview-border-radius)\n          var(--media-preview-border-radius) var(--media-preview-border-radius));\n        padding: var(--media-preview-time-padding, 3.5px 9px);\n        margin: var(--media-preview-time-margin, 0);\n        text-shadow: var(--media-preview-time-text-shadow, 0 0 4px rgb(0 0 0 / .75));\n        transform: translateX(min(\n          max(calc(50% - var(--_box-width) / 2),\n          calc(var(--_box-shift, 0))),\n          calc(var(--_box-width) / 2 - 50%)\n        ));\n      }\n\n      :host([${MediaUIAttributes.MEDIA_PREVIEW_IMAGE}]) media-preview-time-display,\n      :host([${MediaUIAttributes.MEDIA_PREVIEW_IMAGE}]) ::slotted(media-preview-time-display) {\n        transition-delay: var(--media-preview-transition-delay-in, .25s);\n        border-radius: var(--media-preview-time-border-radius,\n          0 0 var(--media-preview-border-radius) var(--media-preview-border-radius));\n        min-width: 100%;\n      }\n\n      :host([${MediaUIAttributes.MEDIA_PREVIEW_TIME}]:hover) {\n        --media-time-range-hover-display: block;\n      }\n\n      [part~=\"arrow\"],\n      ::slotted([part~=\"arrow\"]) {\n        display: var(--media-box-arrow-display, inline-block);\n        transform: translateX(min(\n          max(calc(50% - var(--_box-width) / 2 + var(--media-box-arrow-offset)),\n          calc(var(--_box-shift, 0))),\n          calc(var(--_box-width) / 2 - 50% - var(--media-box-arrow-offset))\n        ));\n        ${/* border-color has to come before border-top-color! */\n  \"\"}\n        border-color: transparent;\n        border-top-color: var(--media-box-arrow-background, var(--_control-background));\n        border-width: var(--media-box-arrow-border-width,\n          var(--media-box-arrow-height, 5px) var(--media-box-arrow-width, 6px) 0);\n        border-style: solid;\n        justify-content: center;\n        height: 0;\n      }\n    </style>\n    <div id=\"preview-rail\">\n      <slot name=\"preview\" part=\"box preview-box\">\n        <media-preview-thumbnail>\n          <template shadowrootmode=\"${MediaPreviewThumbnail.shadowRootOptions.mode}\">\n            ${MediaPreviewThumbnail.getTemplateHTML({})}\n          </template>\n        </media-preview-thumbnail>\n        <media-preview-chapter-display></media-preview-chapter-display>\n        <media-preview-time-display></media-preview-time-display>\n        <slot name=\"preview-arrow\"><div part=\"arrow\"></div></slot>\n      </slot>\n    </div>\n    <div id=\"current-rail\">\n      <slot name=\"current\" part=\"box current-box\">\n        ${\n  /* Example: add the current time w/ arrow to the playhead\n  <media-time-display slot=\"current\"></media-time-display>\n  <div part=\"arrow\" slot=\"current\"></div> */\n  \"\"}\n      </slot>\n    </div>\n  `;\n}\nconst calcRangeValueFromTime = (el, time = el.mediaCurrentTime) => {\n  const startTime = Number.isFinite(el.mediaSeekableStart) ? el.mediaSeekableStart : 0;\n  const endTime = Number.isFinite(el.mediaDuration) ? el.mediaDuration : el.mediaSeekableEnd;\n  if (Number.isNaN(endTime)) return 0;\n  const value = (time - startTime) / (endTime - startTime);\n  return Math.max(0, Math.min(value, 1));\n};\nconst calcTimeFromRangeValue = (el, value = el.range.valueAsNumber) => {\n  const startTime = Number.isFinite(el.mediaSeekableStart) ? el.mediaSeekableStart : 0;\n  const endTime = Number.isFinite(el.mediaDuration) ? el.mediaDuration : el.mediaSeekableEnd;\n  if (Number.isNaN(endTime)) return 0;\n  return value * (endTime - startTime) + startTime;\n};\nclass MediaTimeRange extends MediaChromeRange {\n  constructor() {\n    super();\n    __privateAdd(this, _toggleRangeAnimation);\n    __privateAdd(this, _shouldRangeAnimate);\n    __privateAdd(this, _getElementRects);\n    /**\n     * Get the position, max and min for the box in percentage.\n     * It's important this is in percentage so when the player is resized\n     * the box will move accordingly.\n     */\n    __privateAdd(this, _getBoxPosition);\n    __privateAdd(this, _getBoxShiftPosition);\n    __privateAdd(this, _handlePointerMove);\n    __privateAdd(this, _previewRequest);\n    __privateAdd(this, _seekRequest);\n    __privateAdd(this, _rootNode, void 0);\n    __privateAdd(this, _animation, void 0);\n    __privateAdd(this, _boxes, void 0);\n    __privateAdd(this, _previewTime, void 0);\n    __privateAdd(this, _previewBox, void 0);\n    __privateAdd(this, _currentBox, void 0);\n    __privateAdd(this, _boxPaddingLeft, void 0);\n    __privateAdd(this, _boxPaddingRight, void 0);\n    __privateAdd(this, _mediaChaptersCues, void 0);\n    __privateAdd(this, _isPointerDown, void 0);\n    __privateAdd(this, _updateRange, value => {\n      if (this.dragging) return;\n      if (isValidNumber(value)) {\n        this.range.valueAsNumber = value;\n      }\n      if (!__privateGet(this, _isPointerDown)) {\n        this.updateBar();\n      }\n    });\n    const track = this.shadowRoot.querySelector(\"#track\");\n    track.insertAdjacentHTML(\"afterbegin\", '<div id=\"buffered\" part=\"buffered\"></div>');\n    __privateSet(this, _boxes, this.shadowRoot.querySelectorAll('[part~=\"box\"]'));\n    __privateSet(this, _previewBox, this.shadowRoot.querySelector('[part~=\"preview-box\"]'));\n    __privateSet(this, _currentBox, this.shadowRoot.querySelector('[part~=\"current-box\"]'));\n    const computedStyle = getComputedStyle(this);\n    __privateSet(this, _boxPaddingLeft, parseInt(computedStyle.getPropertyValue(\"--media-box-padding-left\")));\n    __privateSet(this, _boxPaddingRight, parseInt(computedStyle.getPropertyValue(\"--media-box-padding-right\")));\n    __privateSet(this, _animation, new RangeAnimation(this.range, __privateGet(this, _updateRange), 60));\n  }\n  static get observedAttributes() {\n    return [...super.observedAttributes, MediaUIAttributes.MEDIA_PAUSED, MediaUIAttributes.MEDIA_DURATION, MediaUIAttributes.MEDIA_SEEKABLE, MediaUIAttributes.MEDIA_CURRENT_TIME, MediaUIAttributes.MEDIA_PREVIEW_IMAGE, MediaUIAttributes.MEDIA_PREVIEW_TIME, MediaUIAttributes.MEDIA_PREVIEW_CHAPTER, MediaUIAttributes.MEDIA_BUFFERED, MediaUIAttributes.MEDIA_PLAYBACK_RATE, MediaUIAttributes.MEDIA_LOADING, MediaUIAttributes.MEDIA_ENDED];\n  }\n  connectedCallback() {\n    var _a;\n    super.connectedCallback();\n    this.range.setAttribute(\"aria-label\", t(\"seek\"));\n    __privateMethod(this, _toggleRangeAnimation, toggleRangeAnimation_fn).call(this);\n    __privateSet(this, _rootNode, this.getRootNode());\n    (_a = __privateGet(this, _rootNode)) == null ? void 0 : _a.addEventListener(\"transitionstart\", this);\n  }\n  disconnectedCallback() {\n    var _a;\n    super.disconnectedCallback();\n    __privateMethod(this, _toggleRangeAnimation, toggleRangeAnimation_fn).call(this);\n    (_a = __privateGet(this, _rootNode)) == null ? void 0 : _a.removeEventListener(\"transitionstart\", this);\n    __privateSet(this, _rootNode, null);\n  }\n  attributeChangedCallback(attrName, oldValue, newValue) {\n    super.attributeChangedCallback(attrName, oldValue, newValue);\n    if (oldValue == newValue) return;\n    if (attrName === MediaUIAttributes.MEDIA_CURRENT_TIME || attrName === MediaUIAttributes.MEDIA_PAUSED || attrName === MediaUIAttributes.MEDIA_ENDED || attrName === MediaUIAttributes.MEDIA_LOADING || attrName === MediaUIAttributes.MEDIA_DURATION || attrName === MediaUIAttributes.MEDIA_SEEKABLE) {\n      __privateGet(this, _animation).update({\n        start: calcRangeValueFromTime(this),\n        duration: this.mediaSeekableEnd - this.mediaSeekableStart,\n        playbackRate: this.mediaPlaybackRate\n      });\n      __privateMethod(this, _toggleRangeAnimation, toggleRangeAnimation_fn).call(this);\n      updateAriaValueText(this);\n    } else if (attrName === MediaUIAttributes.MEDIA_BUFFERED) {\n      this.updateBufferedBar();\n    }\n    if (attrName === MediaUIAttributes.MEDIA_DURATION || attrName === MediaUIAttributes.MEDIA_SEEKABLE) {\n      this.mediaChaptersCues = __privateGet(this, _mediaChaptersCues);\n      this.updateBar();\n    }\n  }\n  get mediaChaptersCues() {\n    return __privateGet(this, _mediaChaptersCues);\n  }\n  set mediaChaptersCues(value) {\n    var _a;\n    __privateSet(this, _mediaChaptersCues, value);\n    this.updateSegments((_a = __privateGet(this, _mediaChaptersCues)) == null ? void 0 : _a.map(c => ({\n      start: calcRangeValueFromTime(this, c.startTime),\n      end: calcRangeValueFromTime(this, c.endTime)\n    })));\n  }\n  /**\n   * Is the media paused\n   */\n  get mediaPaused() {\n    return getBooleanAttr(this, MediaUIAttributes.MEDIA_PAUSED);\n  }\n  set mediaPaused(value) {\n    setBooleanAttr(this, MediaUIAttributes.MEDIA_PAUSED, value);\n  }\n  /**\n   * Is the media loading\n   */\n  get mediaLoading() {\n    return getBooleanAttr(this, MediaUIAttributes.MEDIA_LOADING);\n  }\n  set mediaLoading(value) {\n    setBooleanAttr(this, MediaUIAttributes.MEDIA_LOADING, value);\n  }\n  /**\n   *\n   */\n  get mediaDuration() {\n    return getNumericAttr(this, MediaUIAttributes.MEDIA_DURATION);\n  }\n  set mediaDuration(value) {\n    setNumericAttr(this, MediaUIAttributes.MEDIA_DURATION, value);\n  }\n  /**\n   *\n   */\n  get mediaCurrentTime() {\n    return getNumericAttr(this, MediaUIAttributes.MEDIA_CURRENT_TIME);\n  }\n  set mediaCurrentTime(value) {\n    setNumericAttr(this, MediaUIAttributes.MEDIA_CURRENT_TIME, value);\n  }\n  /**\n   *\n   */\n  get mediaPlaybackRate() {\n    return getNumericAttr(this, MediaUIAttributes.MEDIA_PLAYBACK_RATE, 1);\n  }\n  set mediaPlaybackRate(value) {\n    setNumericAttr(this, MediaUIAttributes.MEDIA_PLAYBACK_RATE, value);\n  }\n  /**\n   * An array of ranges, each range being an array of two numbers.\n   * e.g. [[1, 2], [3, 4]]\n   */\n  get mediaBuffered() {\n    const buffered = this.getAttribute(MediaUIAttributes.MEDIA_BUFFERED);\n    if (!buffered) return [];\n    return buffered.split(\" \").map(timePair => timePair.split(\":\").map(timeStr => +timeStr));\n  }\n  set mediaBuffered(list) {\n    if (!list) {\n      this.removeAttribute(MediaUIAttributes.MEDIA_BUFFERED);\n      return;\n    }\n    const strVal = list.map(tuple => tuple.join(\":\")).join(\" \");\n    this.setAttribute(MediaUIAttributes.MEDIA_BUFFERED, strVal);\n  }\n  /**\n   * Range of values that can be seeked to\n   * An array of two numbers [start, end]\n   */\n  get mediaSeekable() {\n    const seekable = this.getAttribute(MediaUIAttributes.MEDIA_SEEKABLE);\n    if (!seekable) return void 0;\n    return seekable.split(\":\").map(time => +time);\n  }\n  set mediaSeekable(range) {\n    if (range == null) {\n      this.removeAttribute(MediaUIAttributes.MEDIA_SEEKABLE);\n      return;\n    }\n    this.setAttribute(MediaUIAttributes.MEDIA_SEEKABLE, range.join(\":\"));\n  }\n  /**\n   *\n   */\n  get mediaSeekableEnd() {\n    var _a;\n    const [, end = this.mediaDuration] = (_a = this.mediaSeekable) != null ? _a : [];\n    return end;\n  }\n  get mediaSeekableStart() {\n    var _a;\n    const [start = 0] = (_a = this.mediaSeekable) != null ? _a : [];\n    return start;\n  }\n  /**\n   * The url of the preview image\n   */\n  get mediaPreviewImage() {\n    return getStringAttr(this, MediaUIAttributes.MEDIA_PREVIEW_IMAGE);\n  }\n  set mediaPreviewImage(value) {\n    setStringAttr(this, MediaUIAttributes.MEDIA_PREVIEW_IMAGE, value);\n  }\n  /**\n   *\n   */\n  get mediaPreviewTime() {\n    return getNumericAttr(this, MediaUIAttributes.MEDIA_PREVIEW_TIME);\n  }\n  set mediaPreviewTime(value) {\n    setNumericAttr(this, MediaUIAttributes.MEDIA_PREVIEW_TIME, value);\n  }\n  /**\n   *\n   */\n  get mediaEnded() {\n    return getBooleanAttr(this, MediaUIAttributes.MEDIA_ENDED);\n  }\n  set mediaEnded(value) {\n    setBooleanAttr(this, MediaUIAttributes.MEDIA_ENDED, value);\n  }\n  /* Add a buffered progress bar */\n  updateBar() {\n    super.updateBar();\n    this.updateBufferedBar();\n    this.updateCurrentBox();\n  }\n  updateBufferedBar() {\n    var _a;\n    const buffered = this.mediaBuffered;\n    if (!buffered.length) {\n      return;\n    }\n    let relativeBufferedEnd;\n    if (!this.mediaEnded) {\n      const currentTime = this.mediaCurrentTime;\n      const [, bufferedEnd = this.mediaSeekableStart] = (_a = buffered.find(([start, end]) => start <= currentTime && currentTime <= end)) != null ? _a : [];\n      relativeBufferedEnd = calcRangeValueFromTime(this, bufferedEnd);\n    } else {\n      relativeBufferedEnd = 1;\n    }\n    const {\n      style\n    } = getOrInsertCSSRule(this.shadowRoot, \"#buffered\");\n    style.setProperty(\"width\", `${relativeBufferedEnd * 100}%`);\n  }\n  updateCurrentBox() {\n    const currentSlot = this.shadowRoot.querySelector('slot[name=\"current\"]');\n    if (!currentSlot.assignedElements().length) return;\n    const currentRailRule = getOrInsertCSSRule(this.shadowRoot, \"#current-rail\");\n    const currentBoxRule = getOrInsertCSSRule(this.shadowRoot, '[part~=\"current-box\"]');\n    const rects = __privateMethod(this, _getElementRects, getElementRects_fn).call(this, __privateGet(this, _currentBox));\n    const boxPos = __privateMethod(this, _getBoxPosition, getBoxPosition_fn).call(this, rects, this.range.valueAsNumber);\n    const boxShift = __privateMethod(this, _getBoxShiftPosition, getBoxShiftPosition_fn).call(this, rects, this.range.valueAsNumber);\n    currentRailRule.style.transform = `translateX(${boxPos})`;\n    currentRailRule.style.setProperty(\"--_range-width\", `${rects.range.width}`);\n    currentBoxRule.style.setProperty(\"--_box-shift\", `${boxShift}`);\n    currentBoxRule.style.setProperty(\"--_box-width\", `${rects.box.width}px`);\n    currentBoxRule.style.setProperty(\"visibility\", \"initial\");\n  }\n  handleEvent(evt) {\n    super.handleEvent(evt);\n    switch (evt.type) {\n      case \"input\":\n        __privateMethod(this, _seekRequest, seekRequest_fn).call(this);\n        break;\n      case \"pointermove\":\n        __privateMethod(this, _handlePointerMove, handlePointerMove_fn).call(this, evt);\n        break;\n      case \"pointerup\":\n        if (__privateGet(this, _isPointerDown)) __privateSet(this, _isPointerDown, false);\n        break;\n      case \"pointerdown\":\n        __privateSet(this, _isPointerDown, true);\n        break;\n      case \"pointerleave\":\n        __privateMethod(this, _previewRequest, previewRequest_fn).call(this, null);\n        break;\n      case \"transitionstart\":\n        if (containsComposedNode(evt.target, this)) {\n          setTimeout(() => __privateMethod(this, _toggleRangeAnimation, toggleRangeAnimation_fn).call(this), 0);\n        }\n        break;\n    }\n  }\n}\n_rootNode = new WeakMap();\n_animation = new WeakMap();\n_boxes = new WeakMap();\n_previewTime = new WeakMap();\n_previewBox = new WeakMap();\n_currentBox = new WeakMap();\n_boxPaddingLeft = new WeakMap();\n_boxPaddingRight = new WeakMap();\n_mediaChaptersCues = new WeakMap();\n_isPointerDown = new WeakMap();\n_toggleRangeAnimation = new WeakSet();\ntoggleRangeAnimation_fn = function () {\n  if (__privateMethod(this, _shouldRangeAnimate, shouldRangeAnimate_fn).call(this)) {\n    __privateGet(this, _animation).start();\n  } else {\n    __privateGet(this, _animation).stop();\n  }\n};\n_shouldRangeAnimate = new WeakSet();\nshouldRangeAnimate_fn = function () {\n  return this.isConnected && !this.mediaPaused && !this.mediaLoading && !this.mediaEnded && this.mediaSeekableEnd > 0 && isElementVisible(this);\n};\n_updateRange = new WeakMap();\n_getElementRects = new WeakSet();\ngetElementRects_fn = function (box) {\n  var _a;\n  const bounds = (_a = this.getAttribute(\"bounds\") ? closestComposedNode(this, `#${this.getAttribute(\"bounds\")}`) : this.parentElement) != null ? _a : this;\n  const boundsRect = bounds.getBoundingClientRect();\n  const rangeRect = this.range.getBoundingClientRect();\n  const width = box.offsetWidth;\n  const min = -(rangeRect.left - boundsRect.left - width / 2);\n  const max = boundsRect.right - rangeRect.left - width / 2;\n  return {\n    box: {\n      width,\n      min,\n      max\n    },\n    bounds: boundsRect,\n    range: rangeRect\n  };\n};\n_getBoxPosition = new WeakSet();\ngetBoxPosition_fn = function (rects, ratio) {\n  let position = `${ratio * 100}%`;\n  const {\n    width,\n    min,\n    max\n  } = rects.box;\n  if (!width) return position;\n  if (!Number.isNaN(min)) {\n    const pad = `var(--media-box-padding-left)`;\n    const minPos = `calc(1 / var(--_range-width) * 100 * ${min}% + ${pad})`;\n    position = `max(${minPos}, ${position})`;\n  }\n  if (!Number.isNaN(max)) {\n    const pad = `var(--media-box-padding-right)`;\n    const maxPos = `calc(1 / var(--_range-width) * 100 * ${max}% - ${pad})`;\n    position = `min(${position}, ${maxPos})`;\n  }\n  return position;\n};\n_getBoxShiftPosition = new WeakSet();\ngetBoxShiftPosition_fn = function (rects, ratio) {\n  const {\n    width,\n    min,\n    max\n  } = rects.box;\n  const pointerX = ratio * rects.range.width;\n  if (pointerX < min + __privateGet(this, _boxPaddingLeft)) {\n    const offset = rects.range.left - rects.bounds.left - __privateGet(this, _boxPaddingLeft);\n    return `${pointerX - width / 2 + offset}px`;\n  }\n  if (pointerX > max - __privateGet(this, _boxPaddingRight)) {\n    const offset = rects.bounds.right - rects.range.right - __privateGet(this, _boxPaddingRight);\n    return `${pointerX + width / 2 - offset - rects.range.width}px`;\n  }\n  return 0;\n};\n_handlePointerMove = new WeakSet();\nhandlePointerMove_fn = function (evt) {\n  const isOverBoxes = [...__privateGet(this, _boxes)].some(b => evt.composedPath().includes(b));\n  if (!this.dragging && (isOverBoxes || !evt.composedPath().includes(this))) {\n    __privateMethod(this, _previewRequest, previewRequest_fn).call(this, null);\n    return;\n  }\n  const duration = this.mediaSeekableEnd;\n  if (!duration) return;\n  const previewRailRule = getOrInsertCSSRule(this.shadowRoot, \"#preview-rail\");\n  const previewBoxRule = getOrInsertCSSRule(this.shadowRoot, '[part~=\"preview-box\"]');\n  const rects = __privateMethod(this, _getElementRects, getElementRects_fn).call(this, __privateGet(this, _previewBox));\n  let pointerRatio = (evt.clientX - rects.range.left) / rects.range.width;\n  pointerRatio = Math.max(0, Math.min(1, pointerRatio));\n  const boxPos = __privateMethod(this, _getBoxPosition, getBoxPosition_fn).call(this, rects, pointerRatio);\n  const boxShift = __privateMethod(this, _getBoxShiftPosition, getBoxShiftPosition_fn).call(this, rects, pointerRatio);\n  previewRailRule.style.transform = `translateX(${boxPos})`;\n  previewRailRule.style.setProperty(\"--_range-width\", `${rects.range.width}`);\n  previewBoxRule.style.setProperty(\"--_box-shift\", `${boxShift}`);\n  previewBoxRule.style.setProperty(\"--_box-width\", `${rects.box.width}px`);\n  const diff = Math.round(__privateGet(this, _previewTime)) - Math.round(pointerRatio * duration);\n  if (Math.abs(diff) < 1 && pointerRatio > 0.01 && pointerRatio < 0.99) return;\n  __privateSet(this, _previewTime, pointerRatio * duration);\n  __privateMethod(this, _previewRequest, previewRequest_fn).call(this, __privateGet(this, _previewTime));\n};\n_previewRequest = new WeakSet();\npreviewRequest_fn = function (detail) {\n  this.dispatchEvent(new globalThis.CustomEvent(MediaUIEvents.MEDIA_PREVIEW_REQUEST, {\n    composed: true,\n    bubbles: true,\n    detail\n  }));\n};\n_seekRequest = new WeakSet();\nseekRequest_fn = function () {\n  __privateGet(this, _animation).stop();\n  const detail = calcTimeFromRangeValue(this);\n  this.dispatchEvent(new globalThis.CustomEvent(MediaUIEvents.MEDIA_SEEK_REQUEST, {\n    composed: true,\n    bubbles: true,\n    detail\n  }));\n};\nMediaTimeRange.shadowRootOptions = {\n  mode: \"open\"\n};\nMediaTimeRange.getContainerTemplateHTML = getContainerTemplateHTML;\nif (!globalThis.customElements.get(\"media-time-range\")) {\n  globalThis.customElements.define(\"media-time-range\", MediaTimeRange);\n}\nvar media_time_range_default = MediaTimeRange;\nexport { media_time_range_default as default };","map":{"version":3,"names":["__accessCheck","obj","member","msg","has","TypeError","__privateGet","getter","call","get","__privateAdd","value","WeakSet","add","set","__privateSet","setter","__privateMethod","method","_rootNode","_animation","_boxes","_previewTime","_previewBox","_currentBox","_boxPaddingLeft","_boxPaddingRight","_mediaChaptersCues","_isPointerDown","_toggleRangeAnimation","toggleRangeAnimation_fn","_shouldRangeAnimate","shouldRangeAnimate_fn","_updateRange","_getElementRects","getElementRects_fn","_getBoxPosition","getBoxPosition_fn","_getBoxShiftPosition","getBoxShiftPosition_fn","_handlePointerMove","handlePointerMove_fn","_previewRequest","previewRequest_fn","_seekRequest","seekRequest_fn","globalThis","MediaChromeRange","MediaUIEvents","MediaUIAttributes","isValidNumber","formatAsTimePhrase","isElementVisible","RangeAnimation","getOrInsertCSSRule","containsComposedNode","closestComposedNode","getBooleanAttr","setBooleanAttr","getNumericAttr","setNumericAttr","getStringAttr","setStringAttr","t","MediaPreviewThumbnail","DEFAULT_MISSING_TIME_PHRASE","updateAriaValueText","el","range","currentTimePhrase","calcTimeFromRangeValue","totalTimePhrase","mediaSeekableEnd","fullPhrase","setAttribute","getContainerTemplateHTML","_attrs","MEDIA_PREVIEW_IMAGE","MEDIA_PREVIEW_TIME","MEDIA_PREVIEW_CHAPTER","shadowRootOptions","mode","getTemplateHTML","calcRangeValueFromTime","time","mediaCurrentTime","startTime","Number","isFinite","mediaSeekableStart","endTime","mediaDuration","isNaN","Math","max","min","valueAsNumber","MediaTimeRange","constructor","dragging","updateBar","track","shadowRoot","querySelector","insertAdjacentHTML","querySelectorAll","computedStyle","getComputedStyle","parseInt","getPropertyValue","observedAttributes","MEDIA_PAUSED","MEDIA_DURATION","MEDIA_SEEKABLE","MEDIA_CURRENT_TIME","MEDIA_BUFFERED","MEDIA_PLAYBACK_RATE","MEDIA_LOADING","MEDIA_ENDED","connectedCallback","_a","getRootNode","addEventListener","disconnectedCallback","removeEventListener","attributeChangedCallback","attrName","oldValue","newValue","update","start","duration","playbackRate","mediaPlaybackRate","updateBufferedBar","mediaChaptersCues","updateSegments","map","c","end","mediaPaused","mediaLoading","mediaBuffered","buffered","getAttribute","split","timePair","timeStr","list","removeAttribute","strVal","tuple","join","mediaSeekable","seekable","mediaPreviewImage","mediaPreviewTime","mediaEnded","updateCurrentBox","length","relativeBufferedEnd","currentTime","bufferedEnd","find","style","setProperty","currentSlot","assignedElements","currentRailRule","currentBoxRule","rects","boxPos","boxShift","transform","width","box","handleEvent","evt","type","target","setTimeout","WeakMap","stop","isConnected","bounds","parentElement","boundsRect","getBoundingClientRect","rangeRect","offsetWidth","left","right","ratio","position","pad","minPos","maxPos","pointerX","offset","isOverBoxes","some","b","composedPath","includes","previewRailRule","previewBoxRule","pointerRatio","clientX","diff","round","abs","detail","dispatchEvent","CustomEvent","MEDIA_PREVIEW_REQUEST","composed","bubbles","MEDIA_SEEK_REQUEST","customElements","define","media_time_range_default","default"],"sources":["/app/frontend/node_modules/media-chrome/dist/media-time-range.js"],"sourcesContent":["var __accessCheck = (obj, member, msg) => {\n  if (!member.has(obj))\n    throw TypeError(\"Cannot \" + msg);\n};\nvar __privateGet = (obj, member, getter) => {\n  __accessCheck(obj, member, \"read from private field\");\n  return getter ? getter.call(obj) : member.get(obj);\n};\nvar __privateAdd = (obj, member, value) => {\n  if (member.has(obj))\n    throw TypeError(\"Cannot add the same private member more than once\");\n  member instanceof WeakSet ? member.add(obj) : member.set(obj, value);\n};\nvar __privateSet = (obj, member, value, setter) => {\n  __accessCheck(obj, member, \"write to private field\");\n  setter ? setter.call(obj, value) : member.set(obj, value);\n  return value;\n};\nvar __privateMethod = (obj, member, method) => {\n  __accessCheck(obj, member, \"access private method\");\n  return method;\n};\nvar _rootNode, _animation, _boxes, _previewTime, _previewBox, _currentBox, _boxPaddingLeft, _boxPaddingRight, _mediaChaptersCues, _isPointerDown, _toggleRangeAnimation, toggleRangeAnimation_fn, _shouldRangeAnimate, shouldRangeAnimate_fn, _updateRange, _getElementRects, getElementRects_fn, _getBoxPosition, getBoxPosition_fn, _getBoxShiftPosition, getBoxShiftPosition_fn, _handlePointerMove, handlePointerMove_fn, _previewRequest, previewRequest_fn, _seekRequest, seekRequest_fn;\nimport { globalThis } from \"./utils/server-safe-globals.js\";\nimport { MediaChromeRange } from \"./media-chrome-range.js\";\nimport \"./media-preview-thumbnail.js\";\nimport \"./media-preview-time-display.js\";\nimport \"./media-preview-chapter-display.js\";\nimport { MediaUIEvents, MediaUIAttributes } from \"./constants.js\";\nimport { isValidNumber } from \"./utils/utils.js\";\nimport { formatAsTimePhrase } from \"./utils/time.js\";\nimport { isElementVisible } from \"./utils/element-utils.js\";\nimport { RangeAnimation } from \"./utils/range-animation.js\";\nimport {\n  getOrInsertCSSRule,\n  containsComposedNode,\n  closestComposedNode,\n  getBooleanAttr,\n  setBooleanAttr,\n  getNumericAttr,\n  setNumericAttr,\n  getStringAttr,\n  setStringAttr\n} from \"./utils/element-utils.js\";\nimport { t } from \"./utils/i18n.js\";\nimport MediaPreviewThumbnail from \"./media-preview-thumbnail.js\";\nconst DEFAULT_MISSING_TIME_PHRASE = \"video not loaded, unknown time.\";\nconst updateAriaValueText = (el) => {\n  const range = el.range;\n  const currentTimePhrase = formatAsTimePhrase(+calcTimeFromRangeValue(el));\n  const totalTimePhrase = formatAsTimePhrase(+el.mediaSeekableEnd);\n  const fullPhrase = !(currentTimePhrase && totalTimePhrase) ? DEFAULT_MISSING_TIME_PHRASE : `${currentTimePhrase} of ${totalTimePhrase}`;\n  range.setAttribute(\"aria-valuetext\", fullPhrase);\n};\nfunction getContainerTemplateHTML(_attrs) {\n  return (\n    /*html*/\n    `\n    <style>\n      :host {\n        --media-box-border-radius: 4px;\n        --media-box-padding-left: 10px;\n        --media-box-padding-right: 10px;\n        --media-preview-border-radius: var(--media-box-border-radius);\n        --media-box-arrow-offset: var(--media-box-border-radius);\n        --_control-background: var(--media-control-background, var(--media-secondary-color, rgb(20 20 30 / .7)));\n        --_preview-background: var(--media-preview-background, var(--_control-background));\n\n        ${/* 1% rail width trick was off in Safari, contain: layout seems to\n    prevent the horizontal overflow as well. */\n    \"\"}\n        contain: layout;\n      }\n\n      #buffered {\n        background: var(--media-time-range-buffered-color, rgb(255 255 255 / .4));\n        position: absolute;\n        height: 100%;\n        will-change: width;\n      }\n\n      #preview-rail,\n      #current-rail {\n        width: 100%;\n        position: absolute;\n        left: 0;\n        bottom: 100%;\n        pointer-events: none;\n        will-change: transform;\n      }\n\n      [part~=\"box\"] {\n        width: min-content;\n        ${/* absolute position is needed here so the box doesn't overflow the bounds */\n    \"\"}\n        position: absolute;\n        bottom: 100%;\n        flex-direction: column;\n        align-items: center;\n        transform: translateX(-50%);\n      }\n\n      [part~=\"current-box\"] {\n        display: var(--media-current-box-display, var(--media-box-display, flex));\n        margin: var(--media-current-box-margin, var(--media-box-margin, 0 0 5px));\n        visibility: hidden;\n      }\n\n      [part~=\"preview-box\"] {\n        display: var(--media-preview-box-display, var(--media-box-display, flex));\n        margin: var(--media-preview-box-margin, var(--media-box-margin, 0 0 5px));\n        transition-property: var(--media-preview-transition-property, visibility, opacity);\n        transition-duration: var(--media-preview-transition-duration-out, .25s);\n        transition-delay: var(--media-preview-transition-delay-out, 0s);\n        visibility: hidden;\n        opacity: 0;\n      }\n\n      :host(:is([${MediaUIAttributes.MEDIA_PREVIEW_IMAGE}], [${MediaUIAttributes.MEDIA_PREVIEW_TIME}])[dragging]) [part~=\"preview-box\"] {\n        transition-duration: var(--media-preview-transition-duration-in, .5s);\n        transition-delay: var(--media-preview-transition-delay-in, .25s);\n        visibility: visible;\n        opacity: 1;\n      }\n\n      @media (hover: hover) {\n        :host(:is([${MediaUIAttributes.MEDIA_PREVIEW_IMAGE}], [${MediaUIAttributes.MEDIA_PREVIEW_TIME}]):hover) [part~=\"preview-box\"] {\n          transition-duration: var(--media-preview-transition-duration-in, .5s);\n          transition-delay: var(--media-preview-transition-delay-in, .25s);\n          visibility: visible;\n          opacity: 1;\n        }\n      }\n\n      media-preview-thumbnail,\n      ::slotted(media-preview-thumbnail) {\n        visibility: hidden;\n        ${/* delay changing these CSS props until the preview box transition is ended */\n    \"\"}\n        transition: visibility 0s .25s;\n        transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));\n        background: var(--media-preview-thumbnail-background, var(--_preview-background));\n        box-shadow: var(--media-preview-thumbnail-box-shadow, 0 0 4px rgb(0 0 0 / .2));\n        max-width: var(--media-preview-thumbnail-max-width, 180px);\n        max-height: var(--media-preview-thumbnail-max-height, 160px);\n        min-width: var(--media-preview-thumbnail-min-width, 120px);\n        min-height: var(--media-preview-thumbnail-min-height, 80px);\n        border: var(--media-preview-thumbnail-border);\n        border-radius: var(--media-preview-thumbnail-border-radius,\n          var(--media-preview-border-radius) var(--media-preview-border-radius) 0 0);\n      }\n\n      :host([${MediaUIAttributes.MEDIA_PREVIEW_IMAGE}][dragging]) media-preview-thumbnail,\n      :host([${MediaUIAttributes.MEDIA_PREVIEW_IMAGE}][dragging]) ::slotted(media-preview-thumbnail) {\n        transition-delay: var(--media-preview-transition-delay-in, .25s);\n        visibility: visible;\n      }\n\n      @media (hover: hover) {\n        :host([${MediaUIAttributes.MEDIA_PREVIEW_IMAGE}]:hover) media-preview-thumbnail,\n        :host([${MediaUIAttributes.MEDIA_PREVIEW_IMAGE}]:hover) ::slotted(media-preview-thumbnail) {\n          transition-delay: var(--media-preview-transition-delay-in, .25s);\n          visibility: visible;\n        }\n\n        :host([${MediaUIAttributes.MEDIA_PREVIEW_TIME}]:hover) {\n          --media-time-range-hover-display: block;\n        }\n      }\n\n      media-preview-chapter-display,\n      ::slotted(media-preview-chapter-display) {\n        font-size: var(--media-font-size, 13px);\n        line-height: 17px;\n        min-width: 0;\n        visibility: hidden;\n        ${/* delay changing these CSS props until the preview box transition is ended */\n    \"\"}\n        transition: min-width 0s, border-radius 0s, margin 0s, padding 0s, visibility 0s;\n        transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));\n        background: var(--media-preview-chapter-background, var(--_preview-background));\n        border-radius: var(--media-preview-chapter-border-radius,\n          var(--media-preview-border-radius) var(--media-preview-border-radius)\n          var(--media-preview-border-radius) var(--media-preview-border-radius));\n        padding: var(--media-preview-chapter-padding, 3.5px 9px);\n        margin: var(--media-preview-chapter-margin, 0 0 5px);\n        text-shadow: var(--media-preview-chapter-text-shadow, 0 0 4px rgb(0 0 0 / .75));\n      }\n\n      :host([${MediaUIAttributes.MEDIA_PREVIEW_IMAGE}]) media-preview-chapter-display,\n      :host([${MediaUIAttributes.MEDIA_PREVIEW_IMAGE}]) ::slotted(media-preview-chapter-display) {\n        transition-delay: var(--media-preview-transition-delay-in, .25s);\n        border-radius: var(--media-preview-chapter-border-radius, 0);\n        padding: var(--media-preview-chapter-padding, 3.5px 9px 0);\n        margin: var(--media-preview-chapter-margin, 0);\n        min-width: 100%;\n      }\n\n      media-preview-chapter-display[${MediaUIAttributes.MEDIA_PREVIEW_CHAPTER}],\n      ::slotted(media-preview-chapter-display[${MediaUIAttributes.MEDIA_PREVIEW_CHAPTER}]) {\n        visibility: visible;\n      }\n\n      media-preview-chapter-display:not([aria-valuetext]),\n      ::slotted(media-preview-chapter-display:not([aria-valuetext])) {\n        display: none;\n      }\n\n      media-preview-time-display,\n      ::slotted(media-preview-time-display),\n      media-time-display,\n      ::slotted(media-time-display) {\n        font-size: var(--media-font-size, 13px);\n        line-height: 17px;\n        min-width: 0;\n        ${/* delay changing these CSS props until the preview box transition is ended */\n    \"\"}\n        transition: min-width 0s, border-radius 0s;\n        transition-delay: calc(var(--media-preview-transition-delay-out, 0s) + var(--media-preview-transition-duration-out, .25s));\n        background: var(--media-preview-time-background, var(--_preview-background));\n        border-radius: var(--media-preview-time-border-radius,\n          var(--media-preview-border-radius) var(--media-preview-border-radius)\n          var(--media-preview-border-radius) var(--media-preview-border-radius));\n        padding: var(--media-preview-time-padding, 3.5px 9px);\n        margin: var(--media-preview-time-margin, 0);\n        text-shadow: var(--media-preview-time-text-shadow, 0 0 4px rgb(0 0 0 / .75));\n        transform: translateX(min(\n          max(calc(50% - var(--_box-width) / 2),\n          calc(var(--_box-shift, 0))),\n          calc(var(--_box-width) / 2 - 50%)\n        ));\n      }\n\n      :host([${MediaUIAttributes.MEDIA_PREVIEW_IMAGE}]) media-preview-time-display,\n      :host([${MediaUIAttributes.MEDIA_PREVIEW_IMAGE}]) ::slotted(media-preview-time-display) {\n        transition-delay: var(--media-preview-transition-delay-in, .25s);\n        border-radius: var(--media-preview-time-border-radius,\n          0 0 var(--media-preview-border-radius) var(--media-preview-border-radius));\n        min-width: 100%;\n      }\n\n      :host([${MediaUIAttributes.MEDIA_PREVIEW_TIME}]:hover) {\n        --media-time-range-hover-display: block;\n      }\n\n      [part~=\"arrow\"],\n      ::slotted([part~=\"arrow\"]) {\n        display: var(--media-box-arrow-display, inline-block);\n        transform: translateX(min(\n          max(calc(50% - var(--_box-width) / 2 + var(--media-box-arrow-offset)),\n          calc(var(--_box-shift, 0))),\n          calc(var(--_box-width) / 2 - 50% - var(--media-box-arrow-offset))\n        ));\n        ${/* border-color has to come before border-top-color! */\n    \"\"}\n        border-color: transparent;\n        border-top-color: var(--media-box-arrow-background, var(--_control-background));\n        border-width: var(--media-box-arrow-border-width,\n          var(--media-box-arrow-height, 5px) var(--media-box-arrow-width, 6px) 0);\n        border-style: solid;\n        justify-content: center;\n        height: 0;\n      }\n    </style>\n    <div id=\"preview-rail\">\n      <slot name=\"preview\" part=\"box preview-box\">\n        <media-preview-thumbnail>\n          <template shadowrootmode=\"${MediaPreviewThumbnail.shadowRootOptions.mode}\">\n            ${MediaPreviewThumbnail.getTemplateHTML({})}\n          </template>\n        </media-preview-thumbnail>\n        <media-preview-chapter-display></media-preview-chapter-display>\n        <media-preview-time-display></media-preview-time-display>\n        <slot name=\"preview-arrow\"><div part=\"arrow\"></div></slot>\n      </slot>\n    </div>\n    <div id=\"current-rail\">\n      <slot name=\"current\" part=\"box current-box\">\n        ${/* Example: add the current time w/ arrow to the playhead\n    <media-time-display slot=\"current\"></media-time-display>\n    <div part=\"arrow\" slot=\"current\"></div> */\n    \"\"}\n      </slot>\n    </div>\n  `\n  );\n}\nconst calcRangeValueFromTime = (el, time = el.mediaCurrentTime) => {\n  const startTime = Number.isFinite(el.mediaSeekableStart) ? el.mediaSeekableStart : 0;\n  const endTime = Number.isFinite(el.mediaDuration) ? el.mediaDuration : el.mediaSeekableEnd;\n  if (Number.isNaN(endTime))\n    return 0;\n  const value = (time - startTime) / (endTime - startTime);\n  return Math.max(0, Math.min(value, 1));\n};\nconst calcTimeFromRangeValue = (el, value = el.range.valueAsNumber) => {\n  const startTime = Number.isFinite(el.mediaSeekableStart) ? el.mediaSeekableStart : 0;\n  const endTime = Number.isFinite(el.mediaDuration) ? el.mediaDuration : el.mediaSeekableEnd;\n  if (Number.isNaN(endTime))\n    return 0;\n  return value * (endTime - startTime) + startTime;\n};\nclass MediaTimeRange extends MediaChromeRange {\n  constructor() {\n    super();\n    __privateAdd(this, _toggleRangeAnimation);\n    __privateAdd(this, _shouldRangeAnimate);\n    __privateAdd(this, _getElementRects);\n    /**\n     * Get the position, max and min for the box in percentage.\n     * It's important this is in percentage so when the player is resized\n     * the box will move accordingly.\n     */\n    __privateAdd(this, _getBoxPosition);\n    __privateAdd(this, _getBoxShiftPosition);\n    __privateAdd(this, _handlePointerMove);\n    __privateAdd(this, _previewRequest);\n    __privateAdd(this, _seekRequest);\n    __privateAdd(this, _rootNode, void 0);\n    __privateAdd(this, _animation, void 0);\n    __privateAdd(this, _boxes, void 0);\n    __privateAdd(this, _previewTime, void 0);\n    __privateAdd(this, _previewBox, void 0);\n    __privateAdd(this, _currentBox, void 0);\n    __privateAdd(this, _boxPaddingLeft, void 0);\n    __privateAdd(this, _boxPaddingRight, void 0);\n    __privateAdd(this, _mediaChaptersCues, void 0);\n    __privateAdd(this, _isPointerDown, void 0);\n    __privateAdd(this, _updateRange, (value) => {\n      if (this.dragging)\n        return;\n      if (isValidNumber(value)) {\n        this.range.valueAsNumber = value;\n      }\n      if (!__privateGet(this, _isPointerDown)) {\n        this.updateBar();\n      }\n    });\n    const track = this.shadowRoot.querySelector(\"#track\");\n    track.insertAdjacentHTML(\n      \"afterbegin\",\n      '<div id=\"buffered\" part=\"buffered\"></div>'\n    );\n    __privateSet(this, _boxes, this.shadowRoot.querySelectorAll('[part~=\"box\"]'));\n    __privateSet(this, _previewBox, this.shadowRoot.querySelector('[part~=\"preview-box\"]'));\n    __privateSet(this, _currentBox, this.shadowRoot.querySelector('[part~=\"current-box\"]'));\n    const computedStyle = getComputedStyle(this);\n    __privateSet(this, _boxPaddingLeft, parseInt(\n      computedStyle.getPropertyValue(\"--media-box-padding-left\")\n    ));\n    __privateSet(this, _boxPaddingRight, parseInt(\n      computedStyle.getPropertyValue(\"--media-box-padding-right\")\n    ));\n    __privateSet(this, _animation, new RangeAnimation(this.range, __privateGet(this, _updateRange), 60));\n  }\n  static get observedAttributes() {\n    return [\n      ...super.observedAttributes,\n      MediaUIAttributes.MEDIA_PAUSED,\n      MediaUIAttributes.MEDIA_DURATION,\n      MediaUIAttributes.MEDIA_SEEKABLE,\n      MediaUIAttributes.MEDIA_CURRENT_TIME,\n      MediaUIAttributes.MEDIA_PREVIEW_IMAGE,\n      MediaUIAttributes.MEDIA_PREVIEW_TIME,\n      MediaUIAttributes.MEDIA_PREVIEW_CHAPTER,\n      MediaUIAttributes.MEDIA_BUFFERED,\n      MediaUIAttributes.MEDIA_PLAYBACK_RATE,\n      MediaUIAttributes.MEDIA_LOADING,\n      MediaUIAttributes.MEDIA_ENDED\n    ];\n  }\n  connectedCallback() {\n    var _a;\n    super.connectedCallback();\n    this.range.setAttribute(\"aria-label\", t(\"seek\"));\n    __privateMethod(this, _toggleRangeAnimation, toggleRangeAnimation_fn).call(this);\n    __privateSet(this, _rootNode, this.getRootNode());\n    (_a = __privateGet(this, _rootNode)) == null ? void 0 : _a.addEventListener(\"transitionstart\", this);\n  }\n  disconnectedCallback() {\n    var _a;\n    super.disconnectedCallback();\n    __privateMethod(this, _toggleRangeAnimation, toggleRangeAnimation_fn).call(this);\n    (_a = __privateGet(this, _rootNode)) == null ? void 0 : _a.removeEventListener(\"transitionstart\", this);\n    __privateSet(this, _rootNode, null);\n  }\n  attributeChangedCallback(attrName, oldValue, newValue) {\n    super.attributeChangedCallback(attrName, oldValue, newValue);\n    if (oldValue == newValue)\n      return;\n    if (attrName === MediaUIAttributes.MEDIA_CURRENT_TIME || attrName === MediaUIAttributes.MEDIA_PAUSED || attrName === MediaUIAttributes.MEDIA_ENDED || attrName === MediaUIAttributes.MEDIA_LOADING || attrName === MediaUIAttributes.MEDIA_DURATION || attrName === MediaUIAttributes.MEDIA_SEEKABLE) {\n      __privateGet(this, _animation).update({\n        start: calcRangeValueFromTime(this),\n        duration: this.mediaSeekableEnd - this.mediaSeekableStart,\n        playbackRate: this.mediaPlaybackRate\n      });\n      __privateMethod(this, _toggleRangeAnimation, toggleRangeAnimation_fn).call(this);\n      updateAriaValueText(this);\n    } else if (attrName === MediaUIAttributes.MEDIA_BUFFERED) {\n      this.updateBufferedBar();\n    }\n    if (attrName === MediaUIAttributes.MEDIA_DURATION || attrName === MediaUIAttributes.MEDIA_SEEKABLE) {\n      this.mediaChaptersCues = __privateGet(this, _mediaChaptersCues);\n      this.updateBar();\n    }\n  }\n  get mediaChaptersCues() {\n    return __privateGet(this, _mediaChaptersCues);\n  }\n  set mediaChaptersCues(value) {\n    var _a;\n    __privateSet(this, _mediaChaptersCues, value);\n    this.updateSegments(\n      (_a = __privateGet(this, _mediaChaptersCues)) == null ? void 0 : _a.map((c) => ({\n        start: calcRangeValueFromTime(this, c.startTime),\n        end: calcRangeValueFromTime(this, c.endTime)\n      }))\n    );\n  }\n  /**\n   * Is the media paused\n   */\n  get mediaPaused() {\n    return getBooleanAttr(this, MediaUIAttributes.MEDIA_PAUSED);\n  }\n  set mediaPaused(value) {\n    setBooleanAttr(this, MediaUIAttributes.MEDIA_PAUSED, value);\n  }\n  /**\n   * Is the media loading\n   */\n  get mediaLoading() {\n    return getBooleanAttr(this, MediaUIAttributes.MEDIA_LOADING);\n  }\n  set mediaLoading(value) {\n    setBooleanAttr(this, MediaUIAttributes.MEDIA_LOADING, value);\n  }\n  /**\n   *\n   */\n  get mediaDuration() {\n    return getNumericAttr(this, MediaUIAttributes.MEDIA_DURATION);\n  }\n  set mediaDuration(value) {\n    setNumericAttr(this, MediaUIAttributes.MEDIA_DURATION, value);\n  }\n  /**\n   *\n   */\n  get mediaCurrentTime() {\n    return getNumericAttr(this, MediaUIAttributes.MEDIA_CURRENT_TIME);\n  }\n  set mediaCurrentTime(value) {\n    setNumericAttr(this, MediaUIAttributes.MEDIA_CURRENT_TIME, value);\n  }\n  /**\n   *\n   */\n  get mediaPlaybackRate() {\n    return getNumericAttr(this, MediaUIAttributes.MEDIA_PLAYBACK_RATE, 1);\n  }\n  set mediaPlaybackRate(value) {\n    setNumericAttr(this, MediaUIAttributes.MEDIA_PLAYBACK_RATE, value);\n  }\n  /**\n   * An array of ranges, each range being an array of two numbers.\n   * e.g. [[1, 2], [3, 4]]\n   */\n  get mediaBuffered() {\n    const buffered = this.getAttribute(MediaUIAttributes.MEDIA_BUFFERED);\n    if (!buffered)\n      return [];\n    return buffered.split(\" \").map((timePair) => timePair.split(\":\").map((timeStr) => +timeStr));\n  }\n  set mediaBuffered(list) {\n    if (!list) {\n      this.removeAttribute(MediaUIAttributes.MEDIA_BUFFERED);\n      return;\n    }\n    const strVal = list.map((tuple) => tuple.join(\":\")).join(\" \");\n    this.setAttribute(MediaUIAttributes.MEDIA_BUFFERED, strVal);\n  }\n  /**\n   * Range of values that can be seeked to\n   * An array of two numbers [start, end]\n   */\n  get mediaSeekable() {\n    const seekable = this.getAttribute(MediaUIAttributes.MEDIA_SEEKABLE);\n    if (!seekable)\n      return void 0;\n    return seekable.split(\":\").map((time) => +time);\n  }\n  set mediaSeekable(range) {\n    if (range == null) {\n      this.removeAttribute(MediaUIAttributes.MEDIA_SEEKABLE);\n      return;\n    }\n    this.setAttribute(MediaUIAttributes.MEDIA_SEEKABLE, range.join(\":\"));\n  }\n  /**\n   *\n   */\n  get mediaSeekableEnd() {\n    var _a;\n    const [, end = this.mediaDuration] = (_a = this.mediaSeekable) != null ? _a : [];\n    return end;\n  }\n  get mediaSeekableStart() {\n    var _a;\n    const [start = 0] = (_a = this.mediaSeekable) != null ? _a : [];\n    return start;\n  }\n  /**\n   * The url of the preview image\n   */\n  get mediaPreviewImage() {\n    return getStringAttr(this, MediaUIAttributes.MEDIA_PREVIEW_IMAGE);\n  }\n  set mediaPreviewImage(value) {\n    setStringAttr(this, MediaUIAttributes.MEDIA_PREVIEW_IMAGE, value);\n  }\n  /**\n   *\n   */\n  get mediaPreviewTime() {\n    return getNumericAttr(this, MediaUIAttributes.MEDIA_PREVIEW_TIME);\n  }\n  set mediaPreviewTime(value) {\n    setNumericAttr(this, MediaUIAttributes.MEDIA_PREVIEW_TIME, value);\n  }\n  /**\n   *\n   */\n  get mediaEnded() {\n    return getBooleanAttr(this, MediaUIAttributes.MEDIA_ENDED);\n  }\n  set mediaEnded(value) {\n    setBooleanAttr(this, MediaUIAttributes.MEDIA_ENDED, value);\n  }\n  /* Add a buffered progress bar */\n  updateBar() {\n    super.updateBar();\n    this.updateBufferedBar();\n    this.updateCurrentBox();\n  }\n  updateBufferedBar() {\n    var _a;\n    const buffered = this.mediaBuffered;\n    if (!buffered.length) {\n      return;\n    }\n    let relativeBufferedEnd;\n    if (!this.mediaEnded) {\n      const currentTime = this.mediaCurrentTime;\n      const [, bufferedEnd = this.mediaSeekableStart] = (_a = buffered.find(\n        ([start, end]) => start <= currentTime && currentTime <= end\n      )) != null ? _a : [];\n      relativeBufferedEnd = calcRangeValueFromTime(this, bufferedEnd);\n    } else {\n      relativeBufferedEnd = 1;\n    }\n    const { style } = getOrInsertCSSRule(this.shadowRoot, \"#buffered\");\n    style.setProperty(\"width\", `${relativeBufferedEnd * 100}%`);\n  }\n  updateCurrentBox() {\n    const currentSlot = this.shadowRoot.querySelector(\n      'slot[name=\"current\"]'\n    );\n    if (!currentSlot.assignedElements().length)\n      return;\n    const currentRailRule = getOrInsertCSSRule(\n      this.shadowRoot,\n      \"#current-rail\"\n    );\n    const currentBoxRule = getOrInsertCSSRule(\n      this.shadowRoot,\n      '[part~=\"current-box\"]'\n    );\n    const rects = __privateMethod(this, _getElementRects, getElementRects_fn).call(this, __privateGet(this, _currentBox));\n    const boxPos = __privateMethod(this, _getBoxPosition, getBoxPosition_fn).call(this, rects, this.range.valueAsNumber);\n    const boxShift = __privateMethod(this, _getBoxShiftPosition, getBoxShiftPosition_fn).call(this, rects, this.range.valueAsNumber);\n    currentRailRule.style.transform = `translateX(${boxPos})`;\n    currentRailRule.style.setProperty(\"--_range-width\", `${rects.range.width}`);\n    currentBoxRule.style.setProperty(\"--_box-shift\", `${boxShift}`);\n    currentBoxRule.style.setProperty(\"--_box-width\", `${rects.box.width}px`);\n    currentBoxRule.style.setProperty(\"visibility\", \"initial\");\n  }\n  handleEvent(evt) {\n    super.handleEvent(evt);\n    switch (evt.type) {\n      case \"input\":\n        __privateMethod(this, _seekRequest, seekRequest_fn).call(this);\n        break;\n      case \"pointermove\":\n        __privateMethod(this, _handlePointerMove, handlePointerMove_fn).call(this, evt);\n        break;\n      case \"pointerup\":\n        if (__privateGet(this, _isPointerDown))\n          __privateSet(this, _isPointerDown, false);\n        break;\n      case \"pointerdown\":\n        __privateSet(this, _isPointerDown, true);\n        break;\n      case \"pointerleave\":\n        __privateMethod(this, _previewRequest, previewRequest_fn).call(this, null);\n        break;\n      case \"transitionstart\":\n        if (containsComposedNode(evt.target, this)) {\n          setTimeout(() => __privateMethod(this, _toggleRangeAnimation, toggleRangeAnimation_fn).call(this), 0);\n        }\n        break;\n    }\n  }\n}\n_rootNode = new WeakMap();\n_animation = new WeakMap();\n_boxes = new WeakMap();\n_previewTime = new WeakMap();\n_previewBox = new WeakMap();\n_currentBox = new WeakMap();\n_boxPaddingLeft = new WeakMap();\n_boxPaddingRight = new WeakMap();\n_mediaChaptersCues = new WeakMap();\n_isPointerDown = new WeakMap();\n_toggleRangeAnimation = new WeakSet();\ntoggleRangeAnimation_fn = function() {\n  if (__privateMethod(this, _shouldRangeAnimate, shouldRangeAnimate_fn).call(this)) {\n    __privateGet(this, _animation).start();\n  } else {\n    __privateGet(this, _animation).stop();\n  }\n};\n_shouldRangeAnimate = new WeakSet();\nshouldRangeAnimate_fn = function() {\n  return this.isConnected && !this.mediaPaused && !this.mediaLoading && !this.mediaEnded && this.mediaSeekableEnd > 0 && isElementVisible(this);\n};\n_updateRange = new WeakMap();\n_getElementRects = new WeakSet();\ngetElementRects_fn = function(box) {\n  var _a;\n  const bounds = (_a = this.getAttribute(\"bounds\") ? closestComposedNode(this, `#${this.getAttribute(\"bounds\")}`) : this.parentElement) != null ? _a : this;\n  const boundsRect = bounds.getBoundingClientRect();\n  const rangeRect = this.range.getBoundingClientRect();\n  const width = box.offsetWidth;\n  const min = -(rangeRect.left - boundsRect.left - width / 2);\n  const max = boundsRect.right - rangeRect.left - width / 2;\n  return {\n    box: { width, min, max },\n    bounds: boundsRect,\n    range: rangeRect\n  };\n};\n_getBoxPosition = new WeakSet();\ngetBoxPosition_fn = function(rects, ratio) {\n  let position = `${ratio * 100}%`;\n  const { width, min, max } = rects.box;\n  if (!width)\n    return position;\n  if (!Number.isNaN(min)) {\n    const pad = `var(--media-box-padding-left)`;\n    const minPos = `calc(1 / var(--_range-width) * 100 * ${min}% + ${pad})`;\n    position = `max(${minPos}, ${position})`;\n  }\n  if (!Number.isNaN(max)) {\n    const pad = `var(--media-box-padding-right)`;\n    const maxPos = `calc(1 / var(--_range-width) * 100 * ${max}% - ${pad})`;\n    position = `min(${position}, ${maxPos})`;\n  }\n  return position;\n};\n_getBoxShiftPosition = new WeakSet();\ngetBoxShiftPosition_fn = function(rects, ratio) {\n  const { width, min, max } = rects.box;\n  const pointerX = ratio * rects.range.width;\n  if (pointerX < min + __privateGet(this, _boxPaddingLeft)) {\n    const offset = rects.range.left - rects.bounds.left - __privateGet(this, _boxPaddingLeft);\n    return `${pointerX - width / 2 + offset}px`;\n  }\n  if (pointerX > max - __privateGet(this, _boxPaddingRight)) {\n    const offset = rects.bounds.right - rects.range.right - __privateGet(this, _boxPaddingRight);\n    return `${pointerX + width / 2 - offset - rects.range.width}px`;\n  }\n  return 0;\n};\n_handlePointerMove = new WeakSet();\nhandlePointerMove_fn = function(evt) {\n  const isOverBoxes = [...__privateGet(this, _boxes)].some(\n    (b) => evt.composedPath().includes(b)\n  );\n  if (!this.dragging && (isOverBoxes || !evt.composedPath().includes(this))) {\n    __privateMethod(this, _previewRequest, previewRequest_fn).call(this, null);\n    return;\n  }\n  const duration = this.mediaSeekableEnd;\n  if (!duration)\n    return;\n  const previewRailRule = getOrInsertCSSRule(\n    this.shadowRoot,\n    \"#preview-rail\"\n  );\n  const previewBoxRule = getOrInsertCSSRule(\n    this.shadowRoot,\n    '[part~=\"preview-box\"]'\n  );\n  const rects = __privateMethod(this, _getElementRects, getElementRects_fn).call(this, __privateGet(this, _previewBox));\n  let pointerRatio = (evt.clientX - rects.range.left) / rects.range.width;\n  pointerRatio = Math.max(0, Math.min(1, pointerRatio));\n  const boxPos = __privateMethod(this, _getBoxPosition, getBoxPosition_fn).call(this, rects, pointerRatio);\n  const boxShift = __privateMethod(this, _getBoxShiftPosition, getBoxShiftPosition_fn).call(this, rects, pointerRatio);\n  previewRailRule.style.transform = `translateX(${boxPos})`;\n  previewRailRule.style.setProperty(\"--_range-width\", `${rects.range.width}`);\n  previewBoxRule.style.setProperty(\"--_box-shift\", `${boxShift}`);\n  previewBoxRule.style.setProperty(\"--_box-width\", `${rects.box.width}px`);\n  const diff = Math.round(__privateGet(this, _previewTime)) - Math.round(pointerRatio * duration);\n  if (Math.abs(diff) < 1 && pointerRatio > 0.01 && pointerRatio < 0.99)\n    return;\n  __privateSet(this, _previewTime, pointerRatio * duration);\n  __privateMethod(this, _previewRequest, previewRequest_fn).call(this, __privateGet(this, _previewTime));\n};\n_previewRequest = new WeakSet();\npreviewRequest_fn = function(detail) {\n  this.dispatchEvent(\n    new globalThis.CustomEvent(MediaUIEvents.MEDIA_PREVIEW_REQUEST, {\n      composed: true,\n      bubbles: true,\n      detail\n    })\n  );\n};\n_seekRequest = new WeakSet();\nseekRequest_fn = function() {\n  __privateGet(this, _animation).stop();\n  const detail = calcTimeFromRangeValue(this);\n  this.dispatchEvent(\n    new globalThis.CustomEvent(MediaUIEvents.MEDIA_SEEK_REQUEST, {\n      composed: true,\n      bubbles: true,\n      detail\n    })\n  );\n};\nMediaTimeRange.shadowRootOptions = { mode: \"open\" };\nMediaTimeRange.getContainerTemplateHTML = getContainerTemplateHTML;\nif (!globalThis.customElements.get(\"media-time-range\")) {\n  globalThis.customElements.define(\"media-time-range\", MediaTimeRange);\n}\nvar media_time_range_default = MediaTimeRange;\nexport {\n  media_time_range_default as default\n};\n"],"mappings":"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;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;EACN,EAAE;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB3B,iBAAiB,CAAC4B,mBAAmB,OAAO5B,iBAAiB,CAAC6B,kBAAkB;AACnG;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB7B,iBAAiB,CAAC4B,mBAAmB,OAAO5B,iBAAiB,CAAC6B,kBAAkB;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;EACN,EAAE;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe7B,iBAAiB,CAAC4B,mBAAmB;AACpD,eAAe5B,iBAAiB,CAAC4B,mBAAmB;AACpD;AACA;AACA;AACA;AACA;AACA,iBAAiB5B,iBAAiB,CAAC4B,mBAAmB;AACtD,iBAAiB5B,iBAAiB,CAAC4B,mBAAmB;AACtD;AACA;AACA;AACA;AACA,iBAAiB5B,iBAAiB,CAAC6B,kBAAkB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;EACN,EAAE;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe7B,iBAAiB,CAAC4B,mBAAmB;AACpD,eAAe5B,iBAAiB,CAAC4B,mBAAmB;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC5B,iBAAiB,CAAC8B,qBAAqB;AAC7E,gDAAgD9B,iBAAiB,CAAC8B,qBAAqB;AACvF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;EACN,EAAE;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}