{"ast":null,"code":"import { frame } from 'motion-dom';\nimport { noop } from 'motion-utils';\nimport { addPointerEvent } from '../../events/add-pointer-event.mjs';\nimport { Feature } from '../../motion/features/Feature.mjs';\nimport { getContextWindow } from '../../utils/get-context-window.mjs';\nimport { PanSession } from './PanSession.mjs';\nconst asyncHandler = handler => (event, info) => {\n  if (handler) {\n    frame.postRender(() => handler(event, info));\n  }\n};\nclass PanGesture extends Feature {\n  constructor() {\n    super(...arguments);\n    this.removePointerDownListener = noop;\n  }\n  onPointerDown(pointerDownEvent) {\n    this.session = new PanSession(pointerDownEvent, this.createPanHandlers(), {\n      transformPagePoint: this.node.getTransformPagePoint(),\n      contextWindow: getContextWindow(this.node)\n    });\n  }\n  createPanHandlers() {\n    const {\n      onPanSessionStart,\n      onPanStart,\n      onPan,\n      onPanEnd\n    } = this.node.getProps();\n    return {\n      onSessionStart: asyncHandler(onPanSessionStart),\n      onStart: asyncHandler(onPanStart),\n      onMove: onPan,\n      onEnd: (event, info) => {\n        delete this.session;\n        if (onPanEnd) {\n          frame.postRender(() => onPanEnd(event, info));\n        }\n      }\n    };\n  }\n  mount() {\n    this.removePointerDownListener = addPointerEvent(this.node.current, \"pointerdown\", event => this.onPointerDown(event));\n  }\n  update() {\n    this.session && this.session.updateHandlers(this.createPanHandlers());\n  }\n  unmount() {\n    this.removePointerDownListener();\n    this.session && this.session.end();\n  }\n}\nexport { PanGesture };","map":{"version":3,"names":["asyncHandler","handler","event","info","frame","postRender","PanGesture","Feature","constructor","removePointerDownListener","noop","onPointerDown","pointerDownEvent","session","PanSession","createPanHandlers","transformPagePoint","node","getTransformPagePoint","contextWindow","getContextWindow","onPanSessionStart","onPanStart","onPan","onPanEnd","getProps","onSessionStart","onStart","onMove","onEnd","mount","addPointerEvent","current","update","updateHandlers","unmount","end"],"sources":["/app/frontend/node_modules/framer-motion/src/gestures/pan/index.ts"],"sourcesContent":["import type { PanInfo } from \"motion-dom\"\nimport { frame } from \"motion-dom\"\nimport { noop } from \"motion-utils\"\nimport { addPointerEvent } from \"../../events/add-pointer-event\"\nimport { Feature } from \"../../motion/features/Feature\"\nimport { getContextWindow } from \"../../utils/get-context-window\"\nimport { PanSession } from \"./PanSession\"\n\ntype PanEventHandler = (event: PointerEvent, info: PanInfo) => void\nconst asyncHandler =\n    (handler?: PanEventHandler) => (event: PointerEvent, info: PanInfo) => {\n        if (handler) {\n            frame.postRender(() => handler(event, info))\n        }\n    }\n\nexport class PanGesture extends Feature<Element> {\n    private session?: PanSession\n\n    private removePointerDownListener: Function = noop\n\n    onPointerDown(pointerDownEvent: PointerEvent) {\n        this.session = new PanSession(\n            pointerDownEvent,\n            this.createPanHandlers(),\n            {\n                transformPagePoint: this.node.getTransformPagePoint(),\n                contextWindow: getContextWindow(this.node),\n            }\n        )\n    }\n\n    createPanHandlers() {\n        const { onPanSessionStart, onPanStart, onPan, onPanEnd } =\n            this.node.getProps()\n\n        return {\n            onSessionStart: asyncHandler(onPanSessionStart),\n            onStart: asyncHandler(onPanStart),\n            onMove: onPan,\n            onEnd: (event: PointerEvent, info: PanInfo) => {\n                delete this.session\n                if (onPanEnd) {\n                    frame.postRender(() => onPanEnd(event, info))\n                }\n            },\n        }\n    }\n\n    mount() {\n        this.removePointerDownListener = addPointerEvent(\n            this.node.current!,\n            \"pointerdown\",\n            (event: PointerEvent) => this.onPointerDown(event)\n        )\n    }\n\n    update() {\n        this.session && this.session.updateHandlers(this.createPanHandlers())\n    }\n\n    unmount() {\n        this.removePointerDownListener()\n        this.session && this.session.end()\n    }\n}\n"],"mappings":";;;;;;AASA,MAAMA,YAAY,GACbC,OAAyB,IAAK,CAACC,KAAmB,EAAEC,IAAa,KAAI;EAClE,IAAIF,OAAO,EAAE;IACTG,KAAK,CAACC,UAAU,CAAC,MAAMJ,OAAO,CAACC,KAAK,EAAEC,IAAI,CAAC,CAAC;;AAEpD,CAAC;AAEC,MAAOG,UAAW,SAAQC,OAAgB;EAAhDC,YAAA;;IAGY,IAAyB,CAAAC,yBAAA,GAAaC,IAAI;;EAElDC,aAAaA,CAACC,gBAA8B;IACxC,IAAI,CAACC,OAAO,GAAG,IAAIC,UAAU,CACzBF,gBAAgB,EAChB,IAAI,CAACG,iBAAiB,EAAE,EACxB;MACIC,kBAAkB,EAAE,IAAI,CAACC,IAAI,CAACC,qBAAqB,EAAE;MACrDC,aAAa,EAAEC,gBAAgB,CAAC,IAAI,CAACH,IAAI;IAC5C,EACJ;;EAGLF,iBAAiBA,CAAA;IACb,MAAM;MAAEM,iBAAiB;MAAEC,UAAU;MAAEC,KAAK;MAAEC;IAAQ,CAAE,GACpD,IAAI,CAACP,IAAI,CAACQ,QAAQ,EAAE;IAExB,OAAO;MACHC,cAAc,EAAE1B,YAAY,CAACqB,iBAAiB,CAAC;MAC/CM,OAAO,EAAE3B,YAAY,CAACsB,UAAU,CAAC;MACjCM,MAAM,EAAEL,KAAK;MACbM,KAAK,EAAEA,CAAC3B,KAAmB,EAAEC,IAAa,KAAI;QAC1C,OAAO,IAAI,CAACU,OAAO;QACnB,IAAIW,QAAQ,EAAE;UACVpB,KAAK,CAACC,UAAU,CAAC,MAAMmB,QAAQ,CAACtB,KAAK,EAAEC,IAAI,CAAC,CAAC;;;KAGxD;;EAGL2B,KAAKA,CAAA;IACD,IAAI,CAACrB,yBAAyB,GAAGsB,eAAe,CAC5C,IAAI,CAACd,IAAI,CAACe,OAAQ,EAClB,aAAa,EACZ9B,KAAmB,IAAK,IAAI,CAACS,aAAa,CAACT,KAAK,CAAC,CACrD;;EAGL+B,MAAMA,CAAA;IACF,IAAI,CAACpB,OAAO,IAAI,IAAI,CAACA,OAAO,CAACqB,cAAc,CAAC,IAAI,CAACnB,iBAAiB,EAAE,CAAC;;EAGzEoB,OAAOA,CAAA;IACH,IAAI,CAAC1B,yBAAyB,EAAE;IAChC,IAAI,CAACI,OAAO,IAAI,IAAI,CAACA,OAAO,CAACuB,GAAG,EAAE;;AAEzC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}