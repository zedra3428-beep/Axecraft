{"ast":null,"code":"import _objectWithoutProperties from \"/app/frontend/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";\nimport _objectSpread from \"/app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _classPrivateFieldInitSpec from \"/app/frontend/node_modules/@babel/runtime/helpers/esm/classPrivateFieldInitSpec.js\";\nimport _defineProperty from \"/app/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _classPrivateFieldSet from \"/app/frontend/node_modules/@babel/runtime/helpers/esm/classPrivateFieldSet2.js\";\nimport _classPrivateFieldGet from \"/app/frontend/node_modules/@babel/runtime/helpers/esm/classPrivateFieldGet2.js\";\nconst _excluded = [\"src\"];\nimport { CustomVideoElement } from \"custom-media-element\";\nimport { MediaTracksMixin } from \"media-tracks\";\nvar _apiInit = /*#__PURE__*/new WeakMap();\nclass DashVideoElement extends MediaTracksMixin(CustomVideoElement) {\n  constructor() {\n    super(...arguments);\n    _classPrivateFieldInitSpec(this, _apiInit, void 0);\n  }\n  attributeChangedCallback(attrName, oldValue, newValue) {\n    if (attrName !== \"src\") {\n      super.attributeChangedCallback(attrName, oldValue, newValue);\n    }\n    if (attrName === \"src\" && oldValue != newValue) {\n      this.load();\n    }\n  }\n  async _initThumbnails(representation) {\n    const generateAllCues = async (totalThumbnails2, thumbnailDuration2) => {\n      const promises = [];\n      const timescale = representation.timescale || 1;\n      const startNumber = representation.startNumber || 1;\n      const pto = representation.presentationTimeOffset ? representation.presentationTimeOffset / timescale : 0;\n      const tduration = representation.segmentDuration;\n      for (let thIndex = 0; thIndex < totalThumbnails2; thIndex++) {\n        const startTime = calculateThumbnailStartTime({\n          thIndex,\n          thduration: thumbnailDuration2,\n          ttiles: totalThumbnails2,\n          tduration,\n          startNumber,\n          pto\n        });\n        const endTime = startTime + thumbnailDuration2;\n        const promise = new Promise((resolve, reject) => {\n          this.api.provideThumbnail(startTime, _ref => {\n            let {\n              url,\n              width,\n              height,\n              x,\n              y\n            } = _ref;\n            try {\n              const cue = new VTTCue(startTime, endTime, \"\".concat(url, \"#xywh=\").concat(x, \",\").concat(y, \",\").concat(width, \",\").concat(height));\n              resolve(cue);\n            } catch (err) {\n              reject(err);\n            }\n          });\n        });\n        promises.push(promise);\n      }\n      return await Promise.all(promises).catch(e => console.error(\"Error processing thumbnails\", e));\n    };\n    const {\n      totalThumbnails,\n      thumbnailDuration\n    } = calculateThumbnailTimes(representation);\n    const cues = await generateAllCues(totalThumbnails, thumbnailDuration);\n    let track = this.nativeEl.querySelector('track[label=\"thumbnails\"]');\n    if (!track) {\n      track = createThumbnailTrack();\n      this.nativeEl.appendChild(track);\n      const vttUrl = cuesToVttBlobUrl(cues);\n      track.src = vttUrl;\n      track.dispatchEvent(new Event(\"change\"));\n    }\n  }\n  async load() {\n    if (_classPrivateFieldGet(_apiInit, this)) {\n      this.api.attachSource(this.src);\n      return;\n    }\n    _classPrivateFieldSet(_apiInit, this, true);\n    const Dash = await import(\"dashjs\");\n    this.api = Dash.MediaPlayer().create();\n    this.api.initialize(this.nativeEl, this.src, this.autoplay);\n    this.api.on(Dash.MediaPlayer.events.STREAM_INITIALIZED, () => {\n      const bitrateList = this.api.getRepresentationsByType(\"video\");\n      let videoTrack = this.videoTracks.getTrackById(\"main\");\n      if (!videoTrack) {\n        videoTrack = this.addVideoTrack(\"main\");\n        videoTrack.id = \"main\";\n        videoTrack.selected = true;\n      }\n      bitrateList.forEach(rep => {\n        var _ref2, _rep$bandwidth, _rep$mimeType;\n        const bitrate = (_ref2 = (_rep$bandwidth = rep.bandwidth) !== null && _rep$bandwidth !== void 0 ? _rep$bandwidth : rep.bitrate) !== null && _ref2 !== void 0 ? _ref2 : Number.isFinite(rep.bitrateInKbit) ? rep.bitrateInKbit * 1e3 : void 0;\n        const rendition = videoTrack.addRendition(rep.id, rep.width, rep.height, (_rep$mimeType = rep.mimeType) !== null && _rep$mimeType !== void 0 ? _rep$mimeType : rep.codec, bitrate);\n        rendition.id = rep.id;\n      });\n      this.videoRenditions.addEventListener(\"change\", () => {\n        const selected = this.videoRenditions[this.videoRenditions.selectedIndex];\n        if (selected == null ? void 0 : selected.id) {\n          this.api.updateSettings({\n            streaming: {\n              abr: {\n                autoSwitchBitrate: {\n                  video: false\n                }\n              }\n            }\n          });\n          this.api.setRepresentationForTypeById(\"video\", selected.id, true);\n        } else {\n          this.api.updateSettings({\n            streaming: {\n              abr: {\n                autoSwitchBitrate: {\n                  video: true\n                }\n              }\n            }\n          });\n        }\n      });\n      if (!this.api.isDynamic()) {\n        const imageReps = this.api.getRepresentationsByType(\"image\");\n        imageReps.forEach(async (rep, idx) => {\n          if (idx > 0) return;\n          this._initThumbnails(rep);\n        });\n      }\n    });\n  }\n}\n_defineProperty(DashVideoElement, \"shadowRootOptions\", _objectSpread({}, CustomVideoElement.shadowRootOptions));\n_defineProperty(DashVideoElement, \"getTemplateHTML\", attrs => {\n  const {\n      src\n    } = attrs,\n    rest = _objectWithoutProperties(attrs, _excluded);\n  return CustomVideoElement.getTemplateHTML(rest);\n});\nfunction calculateThumbnailTimes(representation) {\n  var _a, _b;\n  const essentialProp = representation.essentialProperties[0];\n  const [htiles, vtiles] = essentialProp.value.split(\"x\").map(Number);\n  const ttiles = htiles * vtiles;\n  const periodDuration = ((_b = (_a = representation.adaptation) == null ? void 0 : _a.period) == null ? void 0 : _b.duration) || null;\n  const tileDuration = representation.segmentDuration;\n  const timescale = representation.timescale || 1;\n  const tduration = tileDuration / timescale;\n  const thduration = tduration / ttiles;\n  const totalThumbnails = periodDuration != null ? Math.ceil(periodDuration / thduration) : Math.ceil(tileDuration / thduration);\n  return {\n    totalThumbnails,\n    thumbnailDuration: thduration\n  };\n}\nfunction calculateThumbnailStartTime(_ref3) {\n  let {\n    thIndex,\n    tduration,\n    thduration,\n    ttiles,\n    startNumber,\n    pto\n  } = _ref3;\n  const tnumber = Math.floor(thIndex / ttiles) + startNumber;\n  const thnumber = thIndex % ttiles + 1;\n  const tileStartTime = (tnumber - 1) * tduration - pto;\n  const thumbnailStartTime = (thnumber - 1) * thduration;\n  return tileStartTime + thumbnailStartTime;\n}\nfunction createThumbnailTrack() {\n  const track = document.createElement(\"track\");\n  track.kind = \"metadata\";\n  track.label = \"thumbnails\";\n  track.srclang = \"en\";\n  track.mode = \"hidden\";\n  track.default = true;\n  return track;\n}\nfunction cuesToVttBlobUrl(cues) {\n  let vtt = \"WEBVTT\\n\\n\";\n  for (const cue of cues) {\n    vtt += \"\".concat(formatTime(cue.startTime), \" --> \").concat(formatTime(cue.endTime), \"\\n\");\n    vtt += \"\".concat(cue.text, \"\\n\\n\");\n  }\n  const blob = new Blob([vtt], {\n    type: \"text/vtt\"\n  });\n  return URL.createObjectURL(blob);\n  function formatTime(t) {\n    const h = String(Math.floor(t / 3600)).padStart(2, \"0\");\n    const m = String(Math.floor(t % 3600 / 60)).padStart(2, \"0\");\n    const s = (t % 60).toFixed(3).padStart(6, \"0\");\n    return \"\".concat(h, \":\").concat(m, \":\").concat(s);\n  }\n}\nif (globalThis.customElements && !globalThis.customElements.get(\"dash-video\")) {\n  globalThis.customElements.define(\"dash-video\", DashVideoElement);\n}\nvar dash_video_element_default = DashVideoElement;\nexport { dash_video_element_default as default };","map":{"version":3,"names":["CustomVideoElement","MediaTracksMixin","_apiInit","WeakMap","DashVideoElement","constructor","arguments","_classPrivateFieldInitSpec","attributeChangedCallback","attrName","oldValue","newValue","load","_initThumbnails","representation","generateAllCues","totalThumbnails2","thumbnailDuration2","promises","timescale","startNumber","pto","presentationTimeOffset","tduration","segmentDuration","thIndex","startTime","calculateThumbnailStartTime","thduration","ttiles","endTime","promise","Promise","resolve","reject","api","provideThumbnail","_ref","url","width","height","x","y","cue","VTTCue","concat","err","push","all","catch","e","console","error","totalThumbnails","thumbnailDuration","calculateThumbnailTimes","cues","track","nativeEl","querySelector","createThumbnailTrack","appendChild","vttUrl","cuesToVttBlobUrl","src","dispatchEvent","Event","_classPrivateFieldGet","attachSource","_classPrivateFieldSet","Dash","MediaPlayer","create","initialize","autoplay","on","events","STREAM_INITIALIZED","bitrateList","getRepresentationsByType","videoTrack","videoTracks","getTrackById","addVideoTrack","id","selected","forEach","rep","_ref2","_rep$bandwidth","_rep$mimeType","bitrate","bandwidth","Number","isFinite","bitrateInKbit","rendition","addRendition","mimeType","codec","videoRenditions","addEventListener","selectedIndex","updateSettings","streaming","abr","autoSwitchBitrate","video","setRepresentationForTypeById","isDynamic","imageReps","idx","_defineProperty","_objectSpread","shadowRootOptions","attrs","rest","_objectWithoutProperties","_excluded","getTemplateHTML","_a","_b","essentialProp","essentialProperties","htiles","vtiles","value","split","map","periodDuration","adaptation","period","duration","tileDuration","Math","ceil","_ref3","tnumber","floor","thnumber","tileStartTime","thumbnailStartTime","document","createElement","kind","label","srclang","mode","default","vtt","formatTime","text","blob","Blob","type","URL","createObjectURL","t","h","String","padStart","m","s","toFixed","globalThis","customElements","get","define","dash_video_element_default"],"sources":["/app/frontend/node_modules/dash-video-element/dist/dash-video-element.js"],"sourcesContent":["import { CustomVideoElement } from \"custom-media-element\";\nimport { MediaTracksMixin } from \"media-tracks\";\nclass DashVideoElement extends MediaTracksMixin(CustomVideoElement) {\n  static shadowRootOptions = { ...CustomVideoElement.shadowRootOptions };\n  static getTemplateHTML = (attrs) => {\n    const { src, ...rest } = attrs;\n    return CustomVideoElement.getTemplateHTML(rest);\n  };\n  #apiInit;\n  attributeChangedCallback(attrName, oldValue, newValue) {\n    if (attrName !== \"src\") {\n      super.attributeChangedCallback(attrName, oldValue, newValue);\n    }\n    if (attrName === \"src\" && oldValue != newValue) {\n      this.load();\n    }\n  }\n  async _initThumbnails(representation) {\n    const generateAllCues = async (totalThumbnails2, thumbnailDuration2) => {\n      const promises = [];\n      const timescale = representation.timescale || 1;\n      const startNumber = representation.startNumber || 1;\n      const pto = representation.presentationTimeOffset ? representation.presentationTimeOffset / timescale : 0;\n      const tduration = representation.segmentDuration;\n      for (let thIndex = 0; thIndex < totalThumbnails2; thIndex++) {\n        const startTime = calculateThumbnailStartTime({\n          thIndex,\n          thduration: thumbnailDuration2,\n          ttiles: totalThumbnails2,\n          tduration,\n          startNumber,\n          pto\n        });\n        const endTime = startTime + thumbnailDuration2;\n        const promise = new Promise((resolve, reject) => {\n          this.api.provideThumbnail(startTime, ({ url, width, height, x, y }) => {\n            try {\n              const cue = new VTTCue(\n                startTime,\n                endTime,\n                `${url}#xywh=${x},${y},${width},${height}`\n              );\n              resolve(cue);\n            } catch (err) {\n              reject(err);\n            }\n          });\n        });\n        promises.push(promise);\n      }\n      return await Promise.all(promises).catch((e) => console.error(\"Error processing thumbnails\", e));\n    };\n    const { totalThumbnails, thumbnailDuration } = calculateThumbnailTimes(representation);\n    const cues = await generateAllCues(totalThumbnails, thumbnailDuration);\n    let track = this.nativeEl.querySelector('track[label=\"thumbnails\"]');\n    if (!track) {\n      track = createThumbnailTrack();\n      this.nativeEl.appendChild(track);\n      const vttUrl = cuesToVttBlobUrl(cues);\n      track.src = vttUrl;\n      track.dispatchEvent(new Event(\"change\"));\n    }\n  }\n  async load() {\n    if (this.#apiInit) {\n      this.api.attachSource(this.src);\n      return;\n    }\n    this.#apiInit = true;\n    const Dash = await import(\"dashjs\");\n    this.api = Dash.MediaPlayer().create();\n    this.api.initialize(this.nativeEl, this.src, this.autoplay);\n    this.api.on(Dash.MediaPlayer.events.STREAM_INITIALIZED, () => {\n      const bitrateList = this.api.getRepresentationsByType(\"video\");\n      let videoTrack = this.videoTracks.getTrackById(\"main\");\n      if (!videoTrack) {\n        videoTrack = this.addVideoTrack(\"main\");\n        videoTrack.id = \"main\";\n        videoTrack.selected = true;\n      }\n      bitrateList.forEach((rep) => {\n        const bitrate = rep.bandwidth ?? rep.bitrate ?? (Number.isFinite(rep.bitrateInKbit) ? rep.bitrateInKbit * 1e3 : void 0);\n        const rendition = videoTrack.addRendition(rep.id, rep.width, rep.height, rep.mimeType ?? rep.codec, bitrate);\n        rendition.id = rep.id;\n      });\n      this.videoRenditions.addEventListener(\"change\", () => {\n        const selected = this.videoRenditions[this.videoRenditions.selectedIndex];\n        if (selected == null ? void 0 : selected.id) {\n          this.api.updateSettings({ streaming: { abr: { autoSwitchBitrate: { video: false } } } });\n          this.api.setRepresentationForTypeById(\"video\", selected.id, true);\n        } else {\n          this.api.updateSettings({ streaming: { abr: { autoSwitchBitrate: { video: true } } } });\n        }\n      });\n      if (!this.api.isDynamic()) {\n        const imageReps = this.api.getRepresentationsByType(\"image\");\n        imageReps.forEach(async (rep, idx) => {\n          if (idx > 0) return;\n          this._initThumbnails(rep);\n        });\n      }\n    });\n  }\n}\nfunction calculateThumbnailTimes(representation) {\n  var _a, _b;\n  const essentialProp = representation.essentialProperties[0];\n  const [htiles, vtiles] = essentialProp.value.split(\"x\").map(Number);\n  const ttiles = htiles * vtiles;\n  const periodDuration = ((_b = (_a = representation.adaptation) == null ? void 0 : _a.period) == null ? void 0 : _b.duration) || null;\n  const tileDuration = representation.segmentDuration;\n  const timescale = representation.timescale || 1;\n  const tduration = tileDuration / timescale;\n  const thduration = tduration / ttiles;\n  const totalThumbnails = periodDuration != null ? Math.ceil(periodDuration / thduration) : Math.ceil(tileDuration / thduration);\n  return { totalThumbnails, thumbnailDuration: thduration };\n}\nfunction calculateThumbnailStartTime({ thIndex, tduration, thduration, ttiles, startNumber, pto }) {\n  const tnumber = Math.floor(thIndex / ttiles) + startNumber;\n  const thnumber = thIndex % ttiles + 1;\n  const tileStartTime = (tnumber - 1) * tduration - pto;\n  const thumbnailStartTime = (thnumber - 1) * thduration;\n  return tileStartTime + thumbnailStartTime;\n}\nfunction createThumbnailTrack() {\n  const track = document.createElement(\"track\");\n  track.kind = \"metadata\";\n  track.label = \"thumbnails\";\n  track.srclang = \"en\";\n  track.mode = \"hidden\";\n  track.default = true;\n  return track;\n}\nfunction cuesToVttBlobUrl(cues) {\n  let vtt = \"WEBVTT\\n\\n\";\n  for (const cue of cues) {\n    vtt += `${formatTime(cue.startTime)} --> ${formatTime(cue.endTime)}\n`;\n    vtt += `${cue.text}\n\n`;\n  }\n  const blob = new Blob([vtt], { type: \"text/vtt\" });\n  return URL.createObjectURL(blob);\n  function formatTime(t) {\n    const h = String(Math.floor(t / 3600)).padStart(2, \"0\");\n    const m = String(Math.floor(t % 3600 / 60)).padStart(2, \"0\");\n    const s = (t % 60).toFixed(3).padStart(6, \"0\");\n    return `${h}:${m}:${s}`;\n  }\n}\nif (globalThis.customElements && !globalThis.customElements.get(\"dash-video\")) {\n  globalThis.customElements.define(\"dash-video\", DashVideoElement);\n}\nvar dash_video_element_default = DashVideoElement;\nexport {\n  dash_video_element_default as default\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}