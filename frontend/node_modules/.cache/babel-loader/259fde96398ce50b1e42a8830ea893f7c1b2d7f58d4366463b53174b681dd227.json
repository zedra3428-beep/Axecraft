{"ast":null,"code":"\"use client\";\n\nimport _objectSpread from \"/app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { jsx } from 'react/jsx-runtime';\nimport * as React from 'react';\nimport { useId, useMemo } from 'react';\nimport { PresenceContext } from '../../context/PresenceContext.mjs';\nimport { useConstant } from '../../utils/use-constant.mjs';\nimport { PopChild } from './PopChild.mjs';\nconst PresenceChild = _ref => {\n  let {\n    children,\n    initial,\n    isPresent,\n    onExitComplete,\n    custom,\n    presenceAffectsLayout,\n    mode,\n    anchorX,\n    root\n  } = _ref;\n  const presenceChildren = useConstant(newChildrenMap);\n  const id = useId();\n  let isReusedContext = true;\n  let context = useMemo(() => {\n    isReusedContext = false;\n    return {\n      id,\n      initial,\n      isPresent,\n      custom,\n      onExitComplete: childId => {\n        presenceChildren.set(childId, true);\n        for (const isComplete of presenceChildren.values()) {\n          if (!isComplete) return; // can stop searching when any is incomplete\n        }\n        onExitComplete && onExitComplete();\n      },\n      register: childId => {\n        presenceChildren.set(childId, false);\n        return () => presenceChildren.delete(childId);\n      }\n    };\n  }, [isPresent, presenceChildren, onExitComplete]);\n  /**\n   * If the presence of a child affects the layout of the components around it,\n   * we want to make a new context value to ensure they get re-rendered\n   * so they can detect that layout change.\n   */\n  if (presenceAffectsLayout && isReusedContext) {\n    context = _objectSpread({}, context);\n  }\n  useMemo(() => {\n    presenceChildren.forEach((_, key) => presenceChildren.set(key, false));\n  }, [isPresent]);\n  /**\n   * If there's no `motion` components to fire exit animations, we want to remove this\n   * component immediately.\n   */\n  React.useEffect(() => {\n    !isPresent && !presenceChildren.size && onExitComplete && onExitComplete();\n  }, [isPresent]);\n  if (mode === \"popLayout\") {\n    children = jsx(PopChild, {\n      isPresent: isPresent,\n      anchorX: anchorX,\n      root: root,\n      children: children\n    });\n  }\n  return jsx(PresenceContext.Provider, {\n    value: context,\n    children: children\n  });\n};\nfunction newChildrenMap() {\n  return new Map();\n}\nexport { PresenceChild };","map":{"version":3,"names":["PresenceChild","_ref","children","initial","isPresent","onExitComplete","custom","presenceAffectsLayout","mode","anchorX","root","presenceChildren","useConstant","newChildrenMap","id","useId","context","useMemo","childId","set","isComplete","register","isReusedContext","_objectSpread","forEach","_","key","React","useEffect","jsx","PresenceContext","Provider","value"],"sources":["/app/frontend/node_modules/framer-motion/src/components/AnimatePresence/PresenceChild.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport { useId, useMemo } from \"react\"\nimport {\n    PresenceContext,\n    type PresenceContextProps,\n} from \"../../context/PresenceContext\"\nimport { VariantLabels } from \"../../motion/types\"\nimport { useConstant } from \"../../utils/use-constant\"\nimport { PopChild } from \"./PopChild\"\n\ninterface PresenceChildProps {\n    children: React.ReactElement\n    isPresent: boolean\n    onExitComplete?: () => void\n    initial?: false | VariantLabels\n    custom?: any\n    presenceAffectsLayout: boolean\n    mode: \"sync\" | \"popLayout\" | \"wait\"\n    anchorX?: \"left\" | \"right\"\n    root?: HTMLElement | ShadowRoot\n}\n\nexport const PresenceChild = ({\n    children,\n    initial,\n    isPresent,\n    onExitComplete,\n    custom,\n    presenceAffectsLayout,\n    mode,\n    anchorX,\n    root\n}: PresenceChildProps) => {\n    const presenceChildren = useConstant(newChildrenMap)\n    const id = useId()\n\n    let isReusedContext = true\n    let context = useMemo((): PresenceContextProps => {\n        isReusedContext = false\n        return {\n            id,\n            initial,\n            isPresent,\n            custom,\n            onExitComplete: (childId: string) => {\n                presenceChildren.set(childId, true)\n\n                for (const isComplete of presenceChildren.values()) {\n                    if (!isComplete) return // can stop searching when any is incomplete\n                }\n\n                onExitComplete && onExitComplete()\n            },\n            register: (childId: string) => {\n                presenceChildren.set(childId, false)\n                return () => presenceChildren.delete(childId)\n            },\n        }\n    }, [isPresent, presenceChildren, onExitComplete])\n\n    /**\n     * If the presence of a child affects the layout of the components around it,\n     * we want to make a new context value to ensure they get re-rendered\n     * so they can detect that layout change.\n     */\n    if (presenceAffectsLayout && isReusedContext) {\n        context = { ...context }\n    }\n\n    useMemo(() => {\n        presenceChildren.forEach((_, key) => presenceChildren.set(key, false))\n    }, [isPresent])\n\n    /**\n     * If there's no `motion` components to fire exit animations, we want to remove this\n     * component immediately.\n     */\n    React.useEffect(() => {\n        !isPresent &&\n            !presenceChildren.size &&\n            onExitComplete &&\n            onExitComplete()\n    }, [isPresent])\n\n    if (mode === \"popLayout\") {\n        children = (\n            <PopChild isPresent={isPresent} anchorX={anchorX} root={root}>\n                {children}\n            </PopChild>\n        )\n    }\n\n    return (\n        <PresenceContext.Provider value={context}>\n            {children}\n        </PresenceContext.Provider>\n    )\n}\n\nfunction newChildrenMap(): Map<string, boolean> {\n    return new Map()\n}\n"],"mappings":";;;;;;;;;AAwBa,MAAAA,aAAA,GAAAC,IAAA;EAAA;IAAAC,QAAA;IAAAC,OAAA;IAAAC,SAAA;IAAAC,cAAA;IAAAC,MAAA;IAAAC,qBAAA;IAAAC,IAAA;IAAAC,OAAA;IAAAC;EAAA,IAAAT,IAAA;EAWT,MAAAU,gBAAA,GAAAC,WAAA,CAAAC,cAAA;EACA,MAAAC,EAAA,GAAAC,KAAA;;EAGA,IAAAC,OAAA,GAAAC,OAAA;;;;;;;MAOQZ,cAAA,EAAAa,OAAA;QACIP,gBAAA,CAAAQ,GAAA,CAAAD,OAAA;;UAGI,KAAAE,UAAA,EAAiB;;;;MAKzBC,QAAA,EAAAH,OAAA;QACIP,gBAAA,CAAAQ,GAAA,CAAAD,OAAA;;;;;EAMZ;;;;AAIG;EACH,IAAAX,qBAAA,IAAAe,eAAA;IACIN,OAAA,GAAAO,aAAA,KAAAP,OAAA;;;IAIAL,gBAAA,CAAAa,OAAA,EAAAC,CAAA,EAAAC,GAAA,KAAAf,gBAAA,CAAAQ,GAAA,CAAAO,GAAA;EACJ,IAAAtB,SAAA;EAEA;;;AAGG;EACHuB,KAAA,CAAAC,SAAA;IACI,CAAAxB,SAAA,I,4CAGIC,cAAA;EACR,IAAAD,SAAA;EAEA,IAAAI,IAAA;;;;;;;;EAQA,OAAAqB,GAAA,CAAAC,eAAA,CAAAC,QAAA;IAAAC,KAAA,EAAAhB,OAAA;IAAAd,QAAA,EAAAA;EAAA;AAKJ;AAEA,SAAAW,eAAA;;AAEA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}