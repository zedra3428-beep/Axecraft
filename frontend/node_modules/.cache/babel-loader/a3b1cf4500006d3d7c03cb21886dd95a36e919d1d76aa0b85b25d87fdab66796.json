{"ast":null,"code":"import _objectSpread from \"/app/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport React, { useState, useEffect } from \"react\";\nconst ICON_SIZE = \"64px\";\nconst cache = {};\nconst Preview = _ref => {\n  let {\n    src,\n    light,\n    oEmbedUrl,\n    onClickPreview,\n    playIcon,\n    previewTabIndex,\n    previewAriaLabel\n  } = _ref;\n  const [image, setImage] = useState(null);\n  useEffect(() => {\n    if (!src || !light || !oEmbedUrl) return;\n    fetchImage({\n      src,\n      light,\n      oEmbedUrl\n    });\n  }, [src, light, oEmbedUrl]);\n  const fetchImage = async _ref2 => {\n    let {\n      src: src2,\n      light: light2,\n      oEmbedUrl: oEmbedUrl2\n    } = _ref2;\n    if (React.isValidElement(light2)) {\n      return;\n    }\n    if (typeof light2 === \"string\") {\n      setImage(light2);\n      return;\n    }\n    if (cache[src2]) {\n      setImage(cache[src2]);\n      return;\n    }\n    setImage(null);\n    const response = await fetch(oEmbedUrl2.replace(\"{url}\", src2));\n    const data = await response.json();\n    if (data.thumbnail_url) {\n      const fetchedImage = data.thumbnail_url.replace(\"height=100\", \"height=480\").replace(\"-d_295x166\", \"-d_640\");\n      setImage(fetchedImage);\n      cache[src2] = fetchedImage;\n    }\n  };\n  const handleKeyPress = e => {\n    if (e.key === \"Enter\" || e.key === \" \") {\n      onClickPreview == null ? void 0 : onClickPreview(e);\n    }\n  };\n  const handleClick = e => {\n    onClickPreview == null ? void 0 : onClickPreview(e);\n  };\n  const isElement = React.isValidElement(light);\n  const flexCenter = {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  };\n  const styles = {\n    preview: _objectSpread({\n      width: \"100%\",\n      height: \"100%\",\n      backgroundImage: image && !isElement ? \"url(\".concat(image, \")\") : void 0,\n      backgroundSize: \"cover\",\n      backgroundPosition: \"center\",\n      cursor: \"pointer\"\n    }, flexCenter),\n    shadow: _objectSpread({\n      background: \"radial-gradient(rgb(0, 0, 0, 0.3), rgba(0, 0, 0, 0) 60%)\",\n      borderRadius: ICON_SIZE,\n      width: ICON_SIZE,\n      height: ICON_SIZE,\n      position: isElement ? \"absolute\" : void 0\n    }, flexCenter),\n    playIcon: {\n      borderStyle: \"solid\",\n      borderWidth: \"16px 0 16px 26px\",\n      borderColor: \"transparent transparent transparent white\",\n      marginLeft: \"7px\"\n    }\n  };\n  const defaultPlayIcon = /* @__PURE__ */React.createElement(\"div\", {\n    style: styles.shadow,\n    className: \"react-player__shadow\"\n  }, /* @__PURE__ */React.createElement(\"div\", {\n    style: styles.playIcon,\n    className: \"react-player__play-icon\"\n  }));\n  return /* @__PURE__ */React.createElement(\"div\", _objectSpread({\n    style: styles.preview,\n    className: \"react-player__preview\",\n    tabIndex: previewTabIndex,\n    onClick: handleClick,\n    onKeyDown: handleKeyPress\n  }, previewAriaLabel ? {\n    \"aria-label\": previewAriaLabel\n  } : {}), isElement ? light : null, playIcon || defaultPlayIcon);\n};\nvar Preview_default = Preview;\nexport { Preview_default as default };","map":{"version":3,"names":["React","useState","useEffect","ICON_SIZE","cache","Preview","_ref","src","light","oEmbedUrl","onClickPreview","playIcon","previewTabIndex","previewAriaLabel","image","setImage","fetchImage","_ref2","src2","light2","oEmbedUrl2","isValidElement","response","fetch","replace","data","json","thumbnail_url","fetchedImage","handleKeyPress","e","key","handleClick","isElement","flexCenter","display","alignItems","justifyContent","styles","preview","_objectSpread","width","height","backgroundImage","concat","backgroundSize","backgroundPosition","cursor","shadow","background","borderRadius","position","borderStyle","borderWidth","borderColor","marginLeft","defaultPlayIcon","createElement","style","className","tabIndex","onClick","onKeyDown","Preview_default","default"],"sources":["/app/frontend/node_modules/react-player/dist/Preview.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nconst ICON_SIZE = \"64px\";\nconst cache = {};\nconst Preview = ({\n  src,\n  light,\n  oEmbedUrl,\n  onClickPreview,\n  playIcon,\n  previewTabIndex,\n  previewAriaLabel\n}) => {\n  const [image, setImage] = useState(null);\n  useEffect(() => {\n    if (!src || !light || !oEmbedUrl) return;\n    fetchImage({ src, light, oEmbedUrl });\n  }, [src, light, oEmbedUrl]);\n  const fetchImage = async ({\n    src: src2,\n    light: light2,\n    oEmbedUrl: oEmbedUrl2\n  }) => {\n    if (React.isValidElement(light2)) {\n      return;\n    }\n    if (typeof light2 === \"string\") {\n      setImage(light2);\n      return;\n    }\n    if (cache[src2]) {\n      setImage(cache[src2]);\n      return;\n    }\n    setImage(null);\n    const response = await fetch(oEmbedUrl2.replace(\"{url}\", src2));\n    const data = await response.json();\n    if (data.thumbnail_url) {\n      const fetchedImage = data.thumbnail_url.replace(\"height=100\", \"height=480\").replace(\"-d_295x166\", \"-d_640\");\n      setImage(fetchedImage);\n      cache[src2] = fetchedImage;\n    }\n  };\n  const handleKeyPress = (e) => {\n    if (e.key === \"Enter\" || e.key === \" \") {\n      onClickPreview == null ? void 0 : onClickPreview(e);\n    }\n  };\n  const handleClick = (e) => {\n    onClickPreview == null ? void 0 : onClickPreview(e);\n  };\n  const isElement = React.isValidElement(light);\n  const flexCenter = {\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  };\n  const styles = {\n    preview: {\n      width: \"100%\",\n      height: \"100%\",\n      backgroundImage: image && !isElement ? `url(${image})` : void 0,\n      backgroundSize: \"cover\",\n      backgroundPosition: \"center\",\n      cursor: \"pointer\",\n      ...flexCenter\n    },\n    shadow: {\n      background: \"radial-gradient(rgb(0, 0, 0, 0.3), rgba(0, 0, 0, 0) 60%)\",\n      borderRadius: ICON_SIZE,\n      width: ICON_SIZE,\n      height: ICON_SIZE,\n      position: isElement ? \"absolute\" : void 0,\n      ...flexCenter\n    },\n    playIcon: {\n      borderStyle: \"solid\",\n      borderWidth: \"16px 0 16px 26px\",\n      borderColor: \"transparent transparent transparent white\",\n      marginLeft: \"7px\"\n    }\n  };\n  const defaultPlayIcon = /* @__PURE__ */ React.createElement(\"div\", { style: styles.shadow, className: \"react-player__shadow\" }, /* @__PURE__ */ React.createElement(\"div\", { style: styles.playIcon, className: \"react-player__play-icon\" }));\n  return /* @__PURE__ */ React.createElement(\n    \"div\",\n    {\n      style: styles.preview,\n      className: \"react-player__preview\",\n      tabIndex: previewTabIndex,\n      onClick: handleClick,\n      onKeyDown: handleKeyPress,\n      ...previewAriaLabel ? { \"aria-label\": previewAriaLabel } : {}\n    },\n    isElement ? light : null,\n    playIcon || defaultPlayIcon\n  );\n};\nvar Preview_default = Preview;\nexport {\n  Preview_default as default\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}